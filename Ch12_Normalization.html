<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ch12 â€” Normalization</title>
<style>
:root{--primary:#e74c3c;--accent:#27ae60;--blue:#2980b9;--orange:#e67e22;--purple:#8e44ad;--teal:#16a085;--dark:#0d0d0d;--card:#1a1a1a;--card2:#1e1e1e;--text:#e8e8e8;--muted:#999;--border:rgba(231,76,60,.22);--glow:0 0 30px rgba(231,76,60,.25);}
*{margin:0;padding:0;box-sizing:border-box;}html{scroll-behavior:smooth;}
body{background:var(--dark);color:var(--text);font-family:'Segoe UI',system-ui,sans-serif;overflow-x:hidden;}
::-webkit-scrollbar{width:6px;}::-webkit-scrollbar-track{background:var(--dark);}::-webkit-scrollbar-thumb{background:var(--primary);border-radius:3px;}
button{cursor:pointer;border:none;background:none;color:inherit;font:inherit;}
nav{position:fixed;top:0;left:0;right:0;z-index:1000;background:rgba(13,13,13,.95);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);height:54px;display:flex;align-items:center;padding:0 1.5rem;gap:.45rem;overflow-x:auto;}
nav::-webkit-scrollbar{height:0;}.logo{color:var(--primary);font-size:.9rem;font-weight:800;margin-right:auto;white-space:nowrap;}
nav a{color:var(--muted);text-decoration:none;font-size:.66rem;font-weight:600;letter-spacing:.04em;text-transform:uppercase;white-space:nowrap;padding:.25rem .5rem;border-radius:6px;transition:.2s;}
nav a:hover{color:#fff;background:rgba(231,76,60,.18);}
#pb{position:fixed;top:54px;left:0;height:3px;background:linear-gradient(90deg,var(--primary),var(--orange));width:0%;z-index:999;transition:width .1s;}
section{padding:90px 2rem 70px;max-width:1100px;margin:0 auto;}
.sec-label{font-size:.65rem;letter-spacing:.15em;text-transform:uppercase;color:var(--primary);font-weight:700;margin-bottom:.4rem;}
h2{font-size:clamp(1.2rem,3vw,1.8rem);font-weight:700;}h3{font-size:.95rem;font-weight:700;color:var(--primary);}
p{line-height:1.75;color:#b8b8b8;}
.fi{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s;}.fi.v{opacity:1;transform:translateY(0);}
.badge{display:inline-flex;align-items:center;gap:.5rem;background:rgba(231,76,60,.12);border:1px solid var(--border);color:var(--primary);padding:.35rem 1rem;border-radius:999px;font-size:.76rem;font-weight:600;margin-bottom:1.5rem;}
.blob{position:absolute;border-radius:50%;filter:blur(80px);pointer-events:none;z-index:-1;}
.b1{width:400px;height:400px;background:rgba(231,76,60,.07);top:-100px;right:-80px;animation:float 8s ease-in-out infinite;}
.b2{width:300px;height:300px;background:rgba(39,174,96,.05);bottom:60px;left:-80px;animation:float 10s ease-in-out infinite reverse;}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}
.btns{display:flex;gap:.75rem;flex-wrap:wrap;margin-top:1.5rem;}
.btn{display:inline-flex;align-items:center;gap:.5rem;background:var(--primary);color:#fff;padding:.65rem 1.4rem;border-radius:10px;font-weight:700;font-size:.88rem;cursor:pointer;transition:transform .2s,box-shadow .2s;text-decoration:none;}
.btn:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(231,76,60,.4);}
.btn-o{background:transparent;border:2px solid var(--primary);color:var(--primary);}
.btn-o:hover{background:var(--primary);color:#fff;}
.hero-stats{display:flex;gap:2rem;flex-wrap:wrap;margin-top:2rem;}
.hs .n{font-size:1.8rem;font-weight:800;color:var(--primary);}.hs .l{font-size:.65rem;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:1.5rem;transition:transform .25s,box-shadow .25s;}
.card:hover{transform:translateY(-3px);box-shadow:var(--glow);}
.g2{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin-top:1.5rem;}
.g3{display:grid;grid-template-columns:repeat(auto-fit,minmax(210px,1fr));gap:1.2rem;margin-top:1.2rem;}
.g4{display:grid;grid-template-columns:repeat(auto-fit,minmax(175px,1fr));gap:1rem;margin-top:1rem;}
.hbox{background:rgba(231,76,60,.08);border:1px solid rgba(231,76,60,.3);border-radius:12px;padding:1.1rem 1.3rem;margin:.8rem 0;}
.hbox.green{background:rgba(39,174,96,.08);border-color:rgba(39,174,96,.3);}
.hbox.blue{background:rgba(41,128,185,.08);border-color:rgba(41,128,185,.3);}
.hbox.orange{background:rgba(230,126,34,.08);border-color:rgba(230,126,34,.3);}
.hbox.purple{background:rgba(142,68,173,.08);border-color:rgba(142,68,173,.3);}
.hbox.teal{background:rgba(22,160,133,.08);border-color:rgba(22,160,133,.3);}
.hbox.yellow{background:rgba(241,196,15,.06);border-color:rgba(241,196,15,.3);}
.hbox p,.hbox li{color:#d0d0e0;}.hbox strong{color:var(--primary);}
.hbox.green strong{color:var(--accent);}.hbox.blue strong{color:#5dade2;}.hbox.orange strong{color:var(--orange);}
.hbox.purple strong{color:#c39bd3;}.hbox.teal strong{color:#48c9b0;}.hbox.yellow strong{color:#f9e04b;}
.code-block{background:#111;border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:.9rem 1.2rem;font-family:'Courier New',monospace;font-size:.78rem;color:#87ceeb;margin:.6rem 0;overflow-x:auto;line-height:1.8;white-space:pre;}
.kw{color:#e74c3c;font-weight:700;}.fn{color:#3498db;}.val{color:#82e0aa;}.cm{color:#555;font-style:italic;}.hl{background:rgba(241,196,15,.15);color:#f9e04b;border-radius:3px;padding:0 2px;}
.tb{color:#f39c12;font-style:italic;}.cl{color:#3498db;}
.demo-table{border-collapse:collapse;font-size:.8rem;margin:.7rem 0;width:100%;}
.demo-table th{padding:.5rem .8rem;text-align:left;font-size:.7rem;text-transform:uppercase;letter-spacing:.06em;border-bottom:2px solid rgba(255,255,255,.1);background:rgba(231,76,60,.1);color:var(--primary);}
.demo-table td{padding:.45rem .8rem;border-bottom:1px solid rgba(255,255,255,.04);color:#c0c0d0;font-family:monospace;font-size:.78rem;}
.demo-table tr:hover td{background:rgba(255,255,255,.02);}
.null-cell{background:rgba(241,196,15,.15) !important;color:#f9e04b !important;font-weight:700;}
.hl-row td{background:rgba(231,76,60,.07) !important;}
.tbl-wrap{overflow-x:auto;margin:.5rem 0;}
.diff-table{width:100%;border-collapse:collapse;font-size:.8rem;}
.diff-table th{padding:.5rem .8rem;text-align:left;background:rgba(231,76,60,.1);color:var(--primary);font-size:.7rem;text-transform:uppercase;}
.diff-table td{padding:.45rem .8rem;border-bottom:1px solid rgba(255,255,255,.04);color:#c0c0d0;}
.diff-table tr:nth-child(even) td{background:rgba(255,255,255,.02);}
.a-tabs{display:flex;gap:.4rem;flex-wrap:wrap;margin:1rem 0 .5rem;}
.a-tab{padding:.35rem .85rem;border-radius:8px;font-size:.72rem;font-weight:700;cursor:pointer;border:1px solid rgba(255,255,255,.1);color:var(--muted);transition:.2s;}
.a-tab.on,.a-tab:hover{background:var(--primary);color:#fff;border-color:var(--primary);}
.a-panel{display:none;}.a-panel.on{display:block;}
.eg{background:var(--card2);border-radius:12px;padding:1.2rem 1.4rem;margin:.8rem 0;border:1px solid rgba(255,255,255,.06);}
.eg-lbl{font-size:.6rem;text-transform:uppercase;letter-spacing:.1em;color:var(--orange);font-weight:700;margin-bottom:.3rem;}
.eg-desc{font-size:.82rem;color:#b8b8b8;margin-bottom:.6rem;line-height:1.5;}
.note{background:rgba(241,196,15,.06);border:1px solid rgba(241,196,15,.2);border-left:3px solid #f9e04b;border-radius:8px;padding:.7rem 1rem;font-size:.79rem;color:#f9e04b;margin:.6rem 0;line-height:1.5;}
.gotcha{background:rgba(231,76,60,.06);border:1px solid rgba(231,76,60,.25);border-left:3px solid var(--primary);border-radius:8px;padding:.7rem 1rem;font-size:.79rem;color:#f5b7b1;margin:.6rem 0;line-height:1.5;}
.gotcha strong{color:var(--primary);}
.pto{background:var(--card);border:2px dashed rgba(231,76,60,.3);border-radius:16px;padding:1.5rem;margin:1rem 0;position:relative;}
.pto-badge{display:inline-block;background:rgba(231,76,60,.2);color:var(--primary);font-size:.6rem;font-weight:800;text-transform:uppercase;letter-spacing:.1em;padding:.2rem .7rem;border-radius:999px;margin-bottom:.8rem;}
.pto-q{font-size:.92rem;font-weight:600;margin-bottom:.6rem;color:var(--text);}
.pto-hint{font-size:.72rem;color:var(--muted);margin:.5rem 0;font-style:italic;}
.pto-reveal{display:none;margin-top:1rem;padding:1rem;background:rgba(39,174,96,.08);border:1px solid rgba(39,174,96,.3);border-radius:10px;}
.pto-reveal.show{display:block;}
.pto-btn{background:var(--accent);color:#fff;padding:.5rem 1.2rem;border-radius:8px;font-weight:700;font-size:.78rem;cursor:pointer;transition:.2s;border:none;margin-top:.5rem;}
.pto-btn:hover{transform:translateY(-1px);box-shadow:0 4px 15px rgba(39,174,96,.4);}
.pto-btn.revealed{background:var(--muted);cursor:default;}
.wtq{background:var(--card);border:2px dashed rgba(41,128,185,.3);border-radius:16px;padding:1.5rem;margin:1rem 0;}
.wtq-badge{display:inline-block;background:rgba(41,128,185,.2);color:#5dade2;font-size:.6rem;font-weight:800;text-transform:uppercase;letter-spacing:.1em;padding:.2rem .7rem;border-radius:999px;margin-bottom:.8rem;}
.wtq-q{font-size:.92rem;font-weight:600;margin-bottom:.4rem;color:var(--text);}
.wtq-hint{font-size:.72rem;color:var(--muted);margin:.3rem 0 .5rem;font-style:italic;}
.wtq-reveal{display:none;margin-top:1rem;padding:1rem;background:rgba(41,128,185,.08);border:1px solid rgba(41,128,185,.3);border-radius:10px;}
.wtq-reveal.show{display:block;}
.wtq-btn{background:var(--blue);color:#fff;padding:.5rem 1.2rem;border-radius:8px;font-weight:700;font-size:.78rem;cursor:pointer;transition:.2s;border:none;margin-top:.5rem;}
.wtq-btn:hover{transform:translateY(-1px);box-shadow:0 4px 15px rgba(41,128,185,.4);}
.step-box{background:var(--card2);border-radius:12px;padding:1rem;margin:.5rem 0;border-left:3px solid var(--teal);}
.step-num{display:inline-block;background:var(--teal);color:#fff;width:22px;height:22px;border-radius:50%;text-align:center;line-height:22px;font-size:.68rem;font-weight:800;margin-right:.5rem;}
.step-box p{font-size:.82rem;margin-top:.3rem;}
.fc-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));gap:1.2rem;margin-top:1.5rem;}
.fc{height:175px;perspective:900px;cursor:pointer;}
.fc-in{position:relative;width:100%;height:100%;transform-style:preserve-3d;transition:transform .55s cubic-bezier(.4,0,.2,1);}
.fc.flipped .fc-in{transform:rotateY(180deg);}
.fc-fr,.fc-bk{position:absolute;inset:0;backface-visibility:hidden;border-radius:14px;padding:1rem;display:flex;flex-direction:column;justify-content:center;}
.fc-fr{background:var(--card2);border:1px solid var(--border);}
.fc-bk{background:rgba(231,76,60,.1);border:1px solid rgba(231,76,60,.3);transform:rotateY(180deg);}
.fc-tag{font-size:.6rem;font-weight:800;text-transform:uppercase;letter-spacing:.08em;color:var(--primary);margin-bottom:.4rem;}
.fc-q{font-size:.82rem;font-weight:700;color:var(--text);line-height:1.4;}
.fc-hint{font-size:.6rem;color:var(--muted);margin-top:.5rem;}
.fc-a{font-size:.77rem;color:#e8e8e8;line-height:1.5;}
.quiz-wrap{max-width:720px;margin:0 auto;}
#q-prog{display:flex;gap:.3rem;flex-wrap:wrap;margin-bottom:1.5rem;}
.q-dot{width:10px;height:10px;border-radius:50%;background:rgba(255,255,255,.12);transition:.3s;}
.q-dot.done{background:var(--accent);}.q-dot.cur{background:var(--primary);transform:scale(1.3);}.q-dot.bad{background:#c0392b;}
.q-card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:1.8rem;}
.q-num{font-size:.64rem;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);margin-bottom:.5rem;}
.q-text{font-size:1rem;font-weight:600;margin-bottom:1.2rem;line-height:1.5;}
.q-opts{display:flex;flex-direction:column;gap:.6rem;}
.q-opt{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:.75rem 1rem;font-size:.88rem;cursor:pointer;transition:.2s;text-align:left;}
.q-opt:hover:not([disabled]){background:rgba(231,76,60,.1);border-color:var(--primary);}
.q-opt.ok{background:rgba(39,174,96,.15);border-color:var(--accent);color:#82e0aa;}
.q-opt.no{background:rgba(231,76,60,.15);border-color:var(--primary);color:#f1948a;}
.q-exp{margin-top:1rem;padding:.8rem 1rem;border-radius:10px;font-size:.82rem;line-height:1.6;display:none;}
.q-exp.show{display:block;}
.q-exp.ok{background:rgba(39,174,96,.1);border:1px solid rgba(39,174,96,.3);color:#a9dfbf;}
.q-exp.no{background:rgba(231,76,60,.1);border:1px solid rgba(231,76,60,.3);color:#f5b7b1;}
.q-nav{display:flex;justify-content:flex-end;margin-top:1rem;}
#q-score{text-align:center;padding:2.5rem;display:none;}
#q-score .sc-n{font-size:4rem;font-weight:900;color:var(--primary);}
#q-score .sc-l{font-size:.8rem;color:var(--muted);margin-bottom:.8rem;}
.pyq-badge{display:inline-block;background:rgba(241,196,15,.15);color:#f9e04b;font-size:.55rem;font-weight:800;text-transform:uppercase;letter-spacing:.08em;padding:.15rem .6rem;border-radius:999px;margin-left:.5rem;vertical-align:middle;}
.flow-box{display:flex;flex-direction:column;align-items:center;gap:0;margin:1rem 0;}
.flow-step{background:var(--card);border:2px solid var(--teal);border-radius:12px;padding:.8rem 1.5rem;text-align:center;min-width:280px;}
.flow-step strong{color:var(--teal);font-size:.85rem;}
.flow-step p{font-size:.75rem;color:var(--muted);margin-top:.2rem;}
.flow-arrow{color:var(--teal);font-size:1.2rem;margin:.2rem 0;}
.trace-tbl{border-collapse:collapse;font-size:.78rem;margin:.6rem 0;width:100%;}
.trace-tbl th{padding:.4rem .6rem;text-align:left;background:rgba(22,160,133,.12);color:var(--teal);font-size:.68rem;text-transform:uppercase;border-bottom:2px solid rgba(22,160,133,.3);}
.trace-tbl td{padding:.35rem .6rem;border-bottom:1px solid rgba(255,255,255,.04);color:#c0c0d0;font-family:monospace;}
.trace-tbl .yes{color:var(--accent);font-weight:700;}
.trace-tbl .no-m{color:var(--muted);font-style:italic;}
</style>
</head>
<body>

<nav>
<span class="logo">Ch 12 &mdash; Normalization</span>
<a href="#fd">FDs</a>
<a href="#arm">Axioms</a>
<a href="#fcl">F&plus; Closure</a>
<a href="#acl">&alpha;&plus; Closure</a>
<a href="#cc">Canonical Cover</a>
<a href="#anom">Anomalies</a>
<a href="#decomp">Decomposition</a>
<a href="#nf">Normal Forms</a>
<a href="#1nf">1NF</a>
<a href="#2nf">2NF</a>
<a href="#3nf">3NF</a>
<a href="#bcnf">BCNF</a>
<a href="#4nf">4NF</a>
<a href="#5nf">5NF</a>
<a href="#worked">Worked Ex</a>
<a href="#flash">Flashcards</a>
<a href="#quiz">Quiz</a>
</nav>
<div id="pb"></div>

<!-- HERO -->
<section id="hero" style="position:relative;padding-top:120px;">
<div class="b1 blob"></div><div class="b2 blob"></div>
<div class="badge">Chapter 12</div>
<h2 style="font-size:clamp(1.6rem,4vw,2.6rem);">Normalization</h2>
<p style="max-width:620px;margin-top:.8rem;">Master functional dependencies, Armstrong's axioms, closure algorithms, canonical covers, anomaly detection, decomposition, and all normal forms (1NF&ndash;5NF/BCNF). The most exam-heavy chapter in UCS310.</p>
<div class="hero-stats">
<div class="hs"><div class="n">8</div><div class="l">Armstrong's Axioms</div></div>
<div class="hs"><div class="n">6</div><div class="l">Normal Forms</div></div>
<div class="hs"><div class="n">3</div><div class="l">Anomaly Types</div></div>
<div class="hs"><div class="n">78+</div><div class="l">PYQ Marks</div></div>
</div>
<div class="btns">
<a class="btn" href="#fd">Start Learning</a>
<a class="btn btn-o" href="#flash">Flashcards</a>
<a class="btn btn-o" href="#quiz">Take Quiz</a>
</div>
</section>

<!-- ==================== FUNCTIONAL DEPENDENCIES ==================== -->
<section id="fd">
<div class="fi">
<div class="sec-label">Foundation</div>
<h2>Functional Dependencies &amp; Their Types</h2>
<p style="margin-top:.6rem;">A <strong style="color:var(--primary);">functional dependency</strong> X &rarr; Y means: for every valid instance, if two tuples agree on X they must agree on Y. X <em>uniquely determines</em> Y.</p>

<div class="eg">
<div class="eg-lbl">Example &mdash; Student Table</div>
<div class="eg-desc">RollNo &rarr; {Name, SPI, BL} &mdash; knowing a student's roll number uniquely determines their name, SPI, and backlog count.</div>
<div class="tbl-wrap">
<table class="demo-table"><tr><th>RollNo</th><th>Name</th><th>SPI</th><th>BL</th></tr>
<tr><td>101</td><td>Raju</td><td>8</td><td>0</td></tr>
<tr><td>102</td><td>Mitesh</td><td>7</td><td>1</td></tr>
<tr><td>103</td><td>Jay</td><td>7</td><td>0</td></tr></table>
</div>
</div>
<div class="eg">
<div class="eg-lbl">Example &mdash; Account Table</div>
<div class="eg-desc">account_no &rarr; {balance, branch} &mdash; each account number maps to exactly one balance and one branch.</div>
</div>

<h3 style="margin-top:1.5rem;">Types of Functional Dependencies</h3>
<div class="g2">
<div class="card">
<h3 style="color:var(--accent);">Full FD</h3>
<p style="margin-top:.4rem;font-size:.82rem;">B is <strong style="color:var(--accent);">fully functionally dependent</strong> on A if B depends on A but <em>NOT</em> on any proper subset of A.</p>
<div class="eg" style="margin-top:.6rem;">
<div class="eg-lbl">Example</div>
<div class="eg-desc">{Roll_No, Semester, Dept_Name} &rarr; SPI<br>SPI depends on the <em>full composite key</em>, not on any subset alone.</div>
</div>
</div>
<div class="card">
<h3 style="color:var(--orange);">Partial FD</h3>
<p style="margin-top:.4rem;font-size:.82rem;">B is <strong style="color:var(--orange);">partially dependent</strong> on A if B depends on A <em>AND</em> also on a proper subset of A.</p>
<div class="eg" style="margin-top:.6rem;">
<div class="eg-lbl">Example</div>
<div class="eg-desc">{Enrollment_No, Dept_Name} &rarr; SPI<br>But Enrollment_No <em>alone</em> &rarr; SPI. So Dept_Name is unnecessary &mdash; partial dependency!</div>
</div>
</div>
<div class="card">
<h3 style="color:#c39bd3;">Transitive FD</h3>
<p style="margin-top:.4rem;font-size:.82rem;">If A &rarr; B and B &rarr; C, then A &rarr; C is a <strong style="color:#c39bd3;">transitive dependency</strong>.</p>
<div class="eg" style="margin-top:.6rem;">
<div class="eg-lbl">Example &mdash; Sub_Fac</div>
<div class="eg-desc">Subject &rarr; Faculty &amp; Faculty &rarr; Age<br>Therefore Subject &rarr; Age (transitive).</div>
<div class="tbl-wrap" style="margin-top:.4rem;">
<table class="demo-table"><tr><th>Subject</th><th>Faculty</th><th>Age</th></tr>
<tr><td>DS</td><td>Shah</td><td>35</td></tr>
<tr><td>DBMS</td><td>Patel</td><td>32</td></tr>
<tr><td>DF</td><td>Shah</td><td>35</td></tr></table>
</div>
</div>
</div>
<div class="card">
<h3 style="color:#5dade2;">Trivial vs Nontrivial</h3>
<p style="margin-top:.4rem;font-size:.82rem;"><strong style="color:#5dade2;">Trivial:</strong> Y &sube; X (e.g., AB &rarr; A). Always holds.<br><strong style="color:var(--primary);">Nontrivial:</strong> Y &nsub; X (e.g., A &rarr; B where B &ne; A).</p>
</div>
</div>

<div class="gotcha" style="margin-top:1rem;"><strong>Exam Tip:</strong> Partial FD violates 2NF, Transitive FD violates 3NF. Memorize these links &mdash; they appear in every exam!</div>
</div>
</section>

<!-- ==================== ARMSTRONG'S AXIOMS ==================== -->
<section id="arm">
<div class="fi">
<div class="sec-label">Inference Rules</div>
<h2>Armstrong's Axioms</h2>
<p style="margin-top:.6rem;">Eight rules to derive new FDs from a given set F. The first three (Reflexivity, Augmentation, Transitivity) are the <strong style="color:var(--primary);">primary axioms</strong>; the rest are derived.</p>

<div class="tbl-wrap" style="margin-top:1rem;">
<table class="diff-table">
<tr><th>#</th><th>Axiom</th><th>Rule</th><th>Type</th></tr>
<tr><td>1</td><td style="color:var(--primary);font-weight:700;">Reflexivity</td><td>If Y &sube; X, then X &rarr; Y</td><td>Primary</td></tr>
<tr><td>2</td><td style="color:var(--primary);font-weight:700;">Augmentation</td><td>If X &rarr; Y, then XZ &rarr; YZ</td><td>Primary</td></tr>
<tr><td>3</td><td style="color:var(--accent);font-weight:700;">Self-determination</td><td>X &rarr; X (always holds)</td><td>Derived</td></tr>
<tr><td>4</td><td style="color:var(--primary);font-weight:700;">Transitivity</td><td>If X &rarr; Y and Y &rarr; Z, then X &rarr; Z</td><td>Primary</td></tr>
<tr><td>5</td><td style="color:var(--orange);font-weight:700;">Pseudo-transitivity</td><td>If X &rarr; Y and WY &rarr; Z, then WX &rarr; Z</td><td>Derived</td></tr>
<tr><td>6</td><td style="color:#5dade2;font-weight:700;">Decomposition</td><td>If X &rarr; YZ, then X &rarr; Y and X &rarr; Z</td><td>Derived</td></tr>
<tr><td>7</td><td style="color:#c39bd3;font-weight:700;">Union</td><td>If X &rarr; Y and X &rarr; Z, then X &rarr; YZ</td><td>Derived</td></tr>
<tr><td>8</td><td style="color:#48c9b0;font-weight:700;">Composition</td><td>If X &rarr; Y and Z &rarr; W, then XZ &rarr; YW</td><td>Derived</td></tr>
</table>
</div>
<div class="note">The 3 primary axioms (Reflexivity, Augmentation, Transitivity) are <strong>sound and complete</strong> &mdash; they can derive ALL possible FDs from F.</div>
</div>
</section>

<!-- ==================== CLOSURE OF FD SET ==================== -->
<section id="fcl">
<div class="fi">
<div class="sec-label">F&plus; Computation</div>
<h2>Closure of a Set of FDs (F&plus;)</h2>
<p style="margin-top:.6rem;">F&plus; is the set of <strong style="color:var(--primary);">all functional dependencies logically implied</strong> by F. We derive new FDs using Armstrong's Axioms.</p>

<div class="a-tabs">
<button class="a-tab on" onclick="tab(this,'fcl')">Example 1</button>
<button class="a-tab" onclick="tab(this,'fcl')">Example 2</button>
<button class="a-tab" onclick="tab(this,'fcl')">Example 3</button>
</div>

<div class="a-panel on" data-g="fcl">
<div class="hbox teal">
<p><strong>R(A, B, C, G, H, I)</strong>, F = {A &rarr; B, A &rarr; C, CG &rarr; H, CG &rarr; I, B &rarr; H}</p>
</div>
<div class="step-box"><span class="step-num">1</span> A &rarr; B and B &rarr; H &rArr; <strong style="color:var(--accent);">A &rarr; H</strong> (Transitivity)</div>
<div class="step-box"><span class="step-num">2</span> CG &rarr; H and CG &rarr; I &rArr; <strong style="color:var(--accent);">CG &rarr; HI</strong> (Union)</div>
<div class="step-box"><span class="step-num">3</span> A &rarr; C, augment with G: AG &rarr; CG. Then CG &rarr; I &rArr; <strong style="color:var(--accent);">AG &rarr; I</strong> (Pseudo-transitivity / Augmentation + Transitivity)</div>
<p style="margin-top:.6rem;font-weight:700;color:var(--accent);">F&plus; = {A &rarr; H, CG &rarr; HI, AG &rarr; I, ... + all original FDs}</p>
</div>

<div class="a-panel" data-g="fcl">
<div class="hbox teal">
<p><strong>R(A, B, C, D, E, F)</strong>, F = {A &rarr; B, A &rarr; C, CD &rarr; E, CD &rarr; F, B &rarr; E}</p>
</div>
<div class="step-box"><span class="step-num">1</span> A &rarr; B, A &rarr; C &rArr; <strong style="color:var(--accent);">A &rarr; BC</strong> (Union)</div>
<div class="step-box"><span class="step-num">2</span> CD &rarr; E, CD &rarr; F &rArr; <strong style="color:var(--accent);">CD &rarr; EF</strong> (Union)</div>
<div class="step-box"><span class="step-num">3</span> A &rarr; B, B &rarr; E &rArr; <strong style="color:var(--accent);">A &rarr; E</strong> (Transitivity)</div>
<div class="step-box"><span class="step-num">4</span> A &rarr; C, augment with D: AD &rarr; CD. CD &rarr; E &rArr; <strong style="color:var(--accent);">AD &rarr; E</strong></div>
<div class="step-box"><span class="step-num">5</span> Similarly <strong style="color:var(--accent);">AD &rarr; F</strong></div>
<p style="margin-top:.6rem;font-weight:700;color:var(--accent);">F&plus; = {A &rarr; BC, CD &rarr; EF, A &rarr; E, AD &rarr; E, AD &rarr; F, ...}</p>
</div>

<div class="a-panel" data-g="fcl">
<div class="hbox teal">
<p><strong>R(A, B, C, D, E)</strong>, F = {AB &rarr; C, D &rarr; AC, D &rarr; E}</p>
</div>
<div class="step-box"><span class="step-num">1</span> D &rarr; AC, decompose: <strong style="color:var(--accent);">D &rarr; A</strong> and <strong style="color:var(--accent);">D &rarr; C</strong></div>
<div class="step-box"><span class="step-num">2</span> D &rarr; AC and D &rarr; E, union: <strong style="color:var(--accent);">D &rarr; ACE</strong></div>
<p style="margin-top:.6rem;font-weight:700;color:var(--accent);">F&plus; = {D &rarr; A, D &rarr; C, D &rarr; ACE, ...}</p>
</div>
</div>
</section>

<!-- ==================== ATTRIBUTE CLOSURE ==================== -->
<section id="acl">
<div class="fi">
<div class="sec-label">Key Discovery</div>
<h2>Closure of Attribute Sets (&alpha;&plus;)</h2>
<p style="margin-top:.6rem;">Given attributes &alpha;, the closure &alpha;&plus; under F is the <strong style="color:var(--accent);">set of all attributes functionally determined by &alpha;</strong>. Used to find candidate keys!</p>

<div class="hbox blue" style="margin-top:1rem;">
<p><strong>Algorithm to compute &alpha;&plus;:</strong></p>
<ol style="margin-top:.5rem;padding-left:1.5rem;font-size:.82rem;">
<li>result = &alpha;</li>
<li><em>while</em> (changes to result) <em>do</em>
<ul style="margin-top:.3rem;">
<li>for each &beta; &rarr; &gamma; in F do</li>
<li style="margin-left:1rem;">if &beta; &sube; result then result = result &cup; &gamma;</li>
</ul>
</li>
</ol>
</div>

<h3 style="margin-top:1.5rem;">Worked Example: (AG)&plus;</h3>
<div class="hbox teal">
<p><strong>R(A, B, C, G, H, I)</strong>, F = {A &rarr; B, A &rarr; C, CG &rarr; H, CG &rarr; I, B &rarr; H}</p>
</div>
<div class="tbl-wrap">
<table class="trace-tbl">
<tr><th>FD</th><th>Check</th><th>Result</th></tr>
<tr><td colspan="2"><em>Step 1: result = AG</em></td><td style="color:var(--accent);font-weight:700;">AG</td></tr>
<tr><td>A &rarr; B</td><td class="yes">A &sube; AG &#10003;</td><td>ABG</td></tr>
<tr><td>A &rarr; C</td><td class="yes">A &sube; ABG &#10003;</td><td>ABCG</td></tr>
<tr><td>CG &rarr; H</td><td class="yes">CG &sube; ABCG &#10003;</td><td>ABCGH</td></tr>
<tr><td>CG &rarr; I</td><td class="yes">CG &sube; ABCGH &#10003;</td><td>ABCGHI</td></tr>
<tr><td>B &rarr; H</td><td class="yes">B &sube; ABCGHI &#10003;</td><td>ABCGHI (no change)</td></tr>
</table>
</div>
<p style="font-weight:700;color:var(--accent);margin-top:.4rem;">(AG)&plus; = ABCGHI = all attributes &rArr; AG is a <strong>candidate key</strong>!</p>

<h3 style="margin-top:1.5rem;">Exercise: Multiple Closures</h3>
<div class="hbox orange">
<p><strong>R(A, B, C, D, E)</strong>, F = {A &rarr; BC, CD &rarr; E, B &rarr; D, E &rarr; A}</p>
</div>
<div class="tbl-wrap">
<table class="diff-table">
<tr><th>Attribute(s)</th><th>Closure</th><th>Is Candidate Key?</th></tr>
<tr><td>A</td><td style="color:var(--accent);">A&plus; = ABCDE</td><td style="color:var(--accent);font-weight:700;">Yes</td></tr>
<tr><td>CD</td><td style="color:var(--accent);">CD&plus; = ABCDE</td><td style="color:var(--accent);font-weight:700;">Yes</td></tr>
<tr><td>B</td><td style="color:var(--muted);">B&plus; = BD</td><td style="color:var(--primary);">No</td></tr>
<tr><td>BC</td><td style="color:var(--accent);">BC&plus; = ABCDE</td><td style="color:var(--accent);font-weight:700;">Yes</td></tr>
<tr><td>E</td><td style="color:var(--accent);">E&plus; = ABCDE</td><td style="color:var(--accent);font-weight:700;">Yes</td></tr>
</table>
</div>
<div class="note">If &alpha;&plus; = all attributes of R, then &alpha; is a <strong>superkey</strong>. If no proper subset of &alpha; is also a superkey, then &alpha; is a <strong>candidate key</strong>.</div>

<div class="pto" style="margin-top:1rem;">
<div class="pto-badge">Predict the Output</div>
<div class="pto-q">R(A,B,C,D,E,G), F = {A &rarr; B, B &rarr; C, D &rarr; E, E &rarr; G}. Find (AD)&plus;. Is AD a candidate key?</div>
<div class="pto-hint">Start with result = AD, then apply each FD...</div>
<button class="pto-btn" onclick="reveal(this)">Reveal Answer</button>
<div class="pto-reveal">
<p style="font-size:.82rem;color:#a9dfbf;">AD &rarr; A&rarr;B: ABD &rarr; B&rarr;C: ABCD &rarr; D&rarr;E: ABCDE &rarr; E&rarr;G: <strong>ABCDEG</strong>.<br>(AD)&plus; = all attributes. AD is a <strong>candidate key</strong> (neither A alone nor D alone gives all attrs).</p>
</div>
<h3 style="margin-top:1.5rem;">Practice Problems</h3>

<div class="pto" style="margin-top:.8rem;">
<div class="pto-badge">Practice 1 &mdash; Identify FDs from Data</div>
<div class="pto-q">Given the table below, which of the following is a Functional Dependency? (1) X&rarr;Y &nbsp; (2) XY&rarr;Z &nbsp; (3) YZ&rarr;X</div>
<div class="tbl-wrap">
<table class="demo-table"><tr><th>X</th><th>Y</th><th>Z</th></tr>
<tr><td>1</td><td>1</td><td>1</td></tr>
<tr><td>2</td><td>1</td><td>2</td></tr>
<tr><td>2</td><td>1</td><td>3</td></tr>
<tr><td>3</td><td>1</td><td>1</td></tr></table>
</div>
<div class="pto-hint">Check: do same X values always map to same Y? Same XY to same Z? Same YZ to same X?</div>
<button class="pto-btn" onclick="reveal(this)">Reveal Answer</button>
<div class="pto-reveal">
<p style="font-size:.82rem;color:#a9dfbf;"><strong>X&rarr;Y:</strong> X=1&rarr;Y=1, X=2&rarr;Y=1, X=3&rarr;Y=1. Same X always gives same Y. <strong style="color:var(--accent);">Yes, FD holds!</strong><br>
<strong>XY&rarr;Z:</strong> (2,1) maps to Z=2 and Z=3. <strong style="color:var(--primary);">Not an FD.</strong><br>
<strong>YZ&rarr;X:</strong> (1,1) maps to X=1 and X=3. <strong style="color:var(--primary);">Not an FD.</strong></p>
</div>
</div>

<div class="wtq" style="margin-top:.8rem;">
<div class="wtq-badge">Practice 2 &mdash; Closure MCQ</div>
<div class="wtq-q">Given F = {AB&rarr;CD, AF&rarr;D, DE&rarr;F, C&rarr;G, F&rarr;E, G&rarr;A}. Which one of the following options is FALSE?<br>
(A) {CF}&plus; = {ACDEFG} &nbsp; (B) {BG}&plus; = {ABCDG} &nbsp; (C) {AF}&plus; = {ACDEFG} &nbsp; (D) {AB}&plus; = {ABCDFG}</div>
<div class="wtq-hint">Compute each closure step by step using the given FDs.</div>
<button class="wtq-btn" onclick="reveal(this)">Reveal Answer</button>
<div class="wtq-reveal">
<p style="font-size:.82rem;color:#aed6f1;">
<strong>(A) CF+:</strong> C&rarr;G(CFG), G&rarr;A(ACFG), AF&rarr;D(ACDFG), DE&rarr;F needs E... F&rarr;E(ACDEFG). CF+ = ACDEFG &#10003;<br>
<strong>(B) BG+:</strong> G&rarr;A(ABG), AB&rarr;CD(ABCDG), C&rarr;G(already). BG+ = ABCDG &#10003;<br>
<strong>(C) AF+:</strong> AF&rarr;D(ADF), F&rarr;E(ADEF), DE&rarr;F(already), need C? No path to C. AF+ = ADEF. But option says ACDEFG. <strong style="color:var(--primary);">(C) is FALSE!</strong><br>
<strong>(D) AB+:</strong> AB&rarr;CD(ABCD), C&rarr;G(ABCDG), G&rarr;A(already). AB+ = ABCDG. But option says ABCDFG &mdash; missing F derivation. <strong style="color:var(--primary);">(D) is also FALSE!</strong></p>
</div>
</div>

</div>
</div>
</section>

<!-- ==================== CANONICAL COVER ==================== -->
<section id="cc">
<div class="fi">
<div class="sec-label">Minimization</div>
<h2>Canonical Cover (F<sub>c</sub>)</h2>
<p style="margin-top:.6rem;">A canonical cover is the <strong style="color:var(--primary);">minimal set of FDs equivalent to F</strong>, with no redundant dependencies or extraneous attributes.</p>

<h3 style="margin-top:1rem;">What is an Extraneous Attribute?</h3>
<div class="hbox orange">
<p>An attribute is <strong>extraneous</strong> if we can remove it from an FD without changing F&plus;.</p>
<p style="margin-top:.3rem;font-size:.82rem;">Example: F = {AB &rarr; C, A &rarr; C}. In AB &rarr; C, <strong>B is extraneous</strong> because A alone can determine C.</p>
</div>

<h3 style="margin-top:1rem;">Properties of F<sub>c</sub></h3>
<div class="g2">
<div class="card" style="border-left:3px solid var(--accent);">
<p style="font-size:.82rem;">F logically implies all FDs in F<sub>c</sub></p>
</div>
<div class="card" style="border-left:3px solid var(--accent);">
<p style="font-size:.82rem;">F<sub>c</sub> logically implies all FDs in F</p>
</div>
<div class="card" style="border-left:3px solid var(--orange);">
<p style="font-size:.82rem;">No FD in F<sub>c</sub> contains an extraneous attribute</p>
</div>
<div class="card" style="border-left:3px solid var(--blue);">
<p style="font-size:.82rem;">Each left side of FDs in F<sub>c</sub> is unique</p>
</div>
</div>

<h3 style="margin-top:1.5rem;">Algorithm</h3>
<div class="hbox blue">
<p style="font-size:.82rem;"><strong>Repeat:</strong></p>
<ol style="padding-left:1.5rem;font-size:.82rem;margin-top:.3rem;">
<li><strong>Union rule:</strong> Replace &alpha; &rarr; &beta;1 and &alpha; &rarr; &beta;2 with &alpha; &rarr; &beta;1&beta;2</li>
<li><strong>Find extraneous attributes</strong> in any &alpha; &rarr; &beta; (test using F<sub>c</sub>, not original F)</li>
<li>If found, <strong>delete the extraneous attribute</strong></li>
</ol>
<p style="font-size:.82rem;margin-top:.3rem;"><strong>Until</strong> F does not change.</p>
</div>

<div class="a-tabs">
<button class="a-tab on" onclick="tab(this,'cc')">Example 1</button>
<button class="a-tab" onclick="tab(this,'cc')">Example 2</button>
</div>

<div class="a-panel on" data-g="cc">
<div class="hbox teal">
<p><strong>R(A, B, C)</strong>, F = {A &rarr; BC, B &rarr; C, A &rarr; B, AB &rarr; C}</p>
</div>
<div class="step-box"><span class="step-num">1</span><strong>Union:</strong> A &rarr; BC and A &rarr; B combine to A &rarr; BC. Set = {A &rarr; BC, B &rarr; C, AB &rarr; C}</div>
<div class="step-box"><span class="step-num">2</span><strong>A is extraneous in AB &rarr; C:</strong> B &rarr; C already present, so AB &rarr; C is redundant. Set = {A &rarr; BC, B &rarr; C}</div>
<div class="step-box"><span class="step-num">3</span><strong>C is extraneous in A &rarr; BC:</strong> A &rarr; B (from A &rarr; BC) and B &rarr; C gives A &rarr; C by transitivity. So C is derivable.</div>
<p style="margin-top:.6rem;font-weight:700;color:var(--accent);">F<sub>c</sub> = {A &rarr; B, B &rarr; C}</p>
</div>

<div class="a-panel" data-g="cc">
<div class="hbox teal">
<p><strong>R(A, B, C, D, E, F)</strong>, F = {A &rarr; BC, CD &rarr; E, B &rarr; D, E &rarr; A}</p>
</div>
<div class="step-box"><span class="step-num">1</span>Each left side is already unique &mdash; no union needed.</div>
<div class="step-box"><span class="step-num">2</span>Check all attributes &mdash; none are extraneous.</div>
<p style="margin-top:.6rem;font-weight:700;color:var(--accent);">F<sub>c</sub> = F = {A &rarr; BC, CD &rarr; E, B &rarr; D, E &rarr; A} (already minimal!)</p>
</div>

<div class="wtq" style="margin-top:1rem;">
<div class="wtq-badge">PYQ Practice</div>
<div class="wtq-q">R(A,B,C). F = {A &rarr; BC, B &rarr; C, A &rarr; B, AB &rarr; C}. Find canonical cover. <span class="pyq-badge">EST Jul 2025 &bull; 3M</span></div>
<div class="wtq-hint">Apply union, then remove extraneous attributes step by step.</div>
<button class="wtq-btn" onclick="reveal(this)">Reveal Answer</button>
<div class="wtq-reveal">
<p style="font-size:.82rem;color:#aed6f1;">Union: A &rarr; BC (absorbs A &rarr; B). Remove AB &rarr; C (B &rarr; C exists). C extraneous in A &rarr; BC (via A &rarr; B, B &rarr; C). <strong>F<sub>c</sub> = {A &rarr; B, B &rarr; C}</strong></p>
</div>
</div>
</div>
</section>

<!-- ==================== ANOMALIES ==================== -->
<section id="anom">
<div class="fi">
<div class="sec-label">Why Normalize?</div>
<h2>Anomalies in Database Design</h2>
<p style="margin-top:.6rem;">Anomalies are <strong style="color:var(--primary);">problems in poorly planned, un-normalized databases</strong> where all data is stored in one table.</p>

<h3 style="margin-top:1rem;">Emp_Dept(<u>EID</u>, Ename, City, DID, Dname, Manager) &mdash; EID is Primary Key</h3>

<div class="g3" style="margin-top:1rem;">
<div class="card" style="border-left:3px solid var(--primary);">
<h3>Insert Anomaly</h3>
<p style="font-size:.82rem;margin-top:.4rem;">Cannot insert data without the presence of another attribute.</p>
<div class="tbl-wrap" style="margin-top:.4rem;">
<table class="demo-table"><tr><th>EID</th><th>Ename</th><th>City</th><th>DID</th><th>Dname</th><th>Manager</th></tr>
<tr><td>1</td><td>Raj</td><td>Rajkot</td><td>1</td><td>CE</td><td>Shah</td></tr>
<tr><td>2</td><td>Meet</td><td>Surat</td><td>1</td><td>CE</td><td>Shah</td></tr>
<tr class="hl-row"><td class="null-cell">NULL</td><td class="null-cell">NULL</td><td class="null-cell">NULL</td><td>2</td><td>IT</td><td class="null-cell">NULL</td></tr></table>
</div>
<p style="font-size:.78rem;margin-top:.3rem;color:#f5b7b1;">New department IT has no employee yet &mdash; EID (PK) would be NULL &rarr; <strong>can't insert!</strong></p>
</div>
<div class="card" style="border-left:3px solid var(--orange);">
<h3 style="color:var(--orange);">Delete Anomaly</h3>
<p style="font-size:.82rem;margin-top:.4rem;">Deleting data causes unintended loss of other information.</p>
<div class="tbl-wrap" style="margin-top:.4rem;">
<table class="demo-table"><tr><th>EID</th><th>Ename</th><th>City</th><th>DID</th><th>Dname</th><th>Manager</th></tr>
<tr><td>1</td><td>Raj</td><td>Rajkot</td><td>1</td><td>CE</td><td>Shah</td></tr>
<tr><td>2</td><td>Meet</td><td>Surat</td><td>1</td><td>CE</td><td>Shah</td></tr>
<tr class="hl-row"><td>3</td><td>Jay</td><td>Baroda</td><td>2</td><td>IT</td><td>Dave</td></tr></table>
</div>
<p style="font-size:.78rem;margin-top:.3rem;color:#f5b7b1;">Deleting Jay (only IT employee) &rarr; <strong>IT department info is also lost!</strong></p>
</div>
<div class="card" style="border-left:3px solid #5dade2;">
<h3 style="color:#5dade2;">Update Anomaly</h3>
<p style="font-size:.82rem;margin-top:.4rem;">Updating duplicated data inconsistently leads to contradictions.</p>
<div class="tbl-wrap" style="margin-top:.4rem;">
<table class="demo-table"><tr><th>EID</th><th>Ename</th><th>City</th><th>Dname</th><th>Manager</th></tr>
<tr class="hl-row"><td>1</td><td>Raj</td><td>Rajkot</td><td>CE</td><td style="color:var(--primary);font-weight:700;">Sah</td></tr>
<tr><td>2</td><td>Meet</td><td>Surat</td><td>CE</td><td>Shah</td></tr>
<tr><td>3</td><td>Jay</td><td>Baroda</td><td>IT</td><td>Dave</td></tr>
<tr><td>4</td><td>Hari</td><td>Rajkot</td><td>IT</td><td>Dave</td></tr></table>
</div>
<p style="font-size:.78rem;margin-top:.3rem;color:#f5b7b1;">CE manager changed but only row 1 updated (Sah vs Shah) &rarr; <strong>inconsistency!</strong></p>
</div>
</div>

<h3 style="margin-top:1.5rem;color:var(--accent);">Solution: Decompose</h3>
<div class="g2">
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Emp (<u>EID</u>)</p>
<table class="demo-table"><tr><th>EID</th><th>Ename</th><th>City</th><th>DID</th></tr>
<tr><td>1</td><td>Raj</td><td>Rajkot</td><td>1</td></tr>
<tr><td>2</td><td>Meet</td><td>Surat</td><td>1</td></tr>
<tr><td>3</td><td>Jay</td><td>Baroda</td><td>2</td></tr></table>
</div>
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Dept (<u>DID</u>)</p>
<table class="demo-table"><tr><th>DID</th><th>Dname</th><th>Manager</th></tr>
<tr><td>1</td><td>CE</td><td>Shah</td></tr>
<tr><td>2</td><td>IT</td><td>Dave</td></tr>
<tr><td>3</td><td>EC</td><td class="null-cell">NULL</td></tr></table>
</div>
</div>
<div class="hbox green" style="margin-top:1rem;">
<p><strong>Normalization eliminates all three anomalies!</strong> New departments can be added to Dept independently. Deleting an employee doesn't lose department info. Manager changes need updating in only one place.</p>
</div>
</div>
</section>

<!-- ==================== DECOMPOSITION ==================== -->
<section id="decomp">
<div class="fi">
<div class="sec-label">Splitting Relations</div>
<h2>Decomposition</h2>
<p style="margin-top:.6rem;">Decomposition is the <strong style="color:var(--primary);">process of breaking a relation into two or more smaller relations</strong> such that each contains a subset of attributes, and together they include all tuples and attributes of R.</p>

<div class="g2" style="margin-top:1rem;">
<div class="card" style="border-left:3px solid var(--primary);">
<h3>Lossy Decomposition</h3>
<p style="font-size:.82rem;margin-top:.4rem;">Join of R1 and R2 does <strong style="color:var(--primary);">NOT</strong> yield the same relation as R &mdash; creates <em>spurious tuples</em>.</p>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);margin-top:.5rem;">Customer (original)</p>
<table class="demo-table"><tr><th>Ano</th><th>Balance</th><th>Bname</th></tr>
<tr><td>A01</td><td>5000</td><td>Rajkot</td></tr><tr><td>A02</td><td>5000</td><td>Surat</td></tr></table>
<div class="g2" style="margin-top:.4rem;">
<div><p style="font-size:.7rem;font-weight:700;color:var(--muted);">T1(Ano, Balance)</p>
<table class="demo-table"><tr><th>Ano</th><th>Balance</th></tr>
<tr><td>A01</td><td>5000</td></tr><tr><td>A02</td><td>5000</td></tr></table></div>
<div><p style="font-size:.7rem;font-weight:700;color:var(--muted);">T2(Balance, Bname)</p>
<table class="demo-table"><tr><th>Balance</th><th>Bname</th></tr>
<tr><td>5000</td><td>Rajkot</td></tr><tr><td>5000</td><td>Surat</td></tr></table></div>
</div>
<p style="font-size:.7rem;font-weight:700;color:var(--primary);margin-top:.4rem;">T1 &#10781; T2 on Balance &rarr; 4 rows (spurious!)</p>
<table class="demo-table"><tr><th>Ano</th><th>Balance</th><th>Bname</th></tr>
<tr><td>A01</td><td>5000</td><td>Rajkot</td></tr>
<tr class="hl-row"><td>A01</td><td>5000</td><td>Surat</td></tr>
<tr class="hl-row"><td>A02</td><td>5000</td><td>Rajkot</td></tr>
<tr><td>A02</td><td>5000</td><td>Surat</td></tr></table>
<p style="font-size:.72rem;color:var(--primary);font-weight:700;margin-top:.2rem;">NOT Same &mdash; extra rows created!</p>
</div>
<div class="card" style="border-left:3px solid var(--accent);">
<h3 style="color:var(--accent);">Lossless Decomposition</h3>
<p style="font-size:.82rem;margin-top:.4rem;">Join of R1 and R2 produces the <strong style="color:var(--accent);">exact same relation</strong> as R.</p>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);margin-top:.5rem;">Customer (original)</p>
<table class="demo-table"><tr><th>Ano</th><th>Balance</th><th>Bname</th></tr>
<tr><td>A01</td><td>5000</td><td>Rajkot</td></tr><tr><td>A02</td><td>5000</td><td>Surat</td></tr></table>
<div class="g2" style="margin-top:.4rem;">
<div><p style="font-size:.7rem;font-weight:700;color:var(--muted);">T1(Ano, Balance)</p>
<table class="demo-table"><tr><th>Ano</th><th>Balance</th></tr>
<tr><td>A01</td><td>5000</td></tr><tr><td>A02</td><td>5000</td></tr></table></div>
<div><p style="font-size:.7rem;font-weight:700;color:var(--muted);">T2(Ano, Bname)</p>
<table class="demo-table"><tr><th>Ano</th><th>Bname</th></tr>
<tr><td>A01</td><td>Rajkot</td></tr><tr><td>A02</td><td>Surat</td></tr></table></div>
</div>
<p style="font-size:.7rem;font-weight:700;color:var(--accent);margin-top:.4rem;">T1 &#10781; T2 on Ano &rarr; 2 rows (same!)</p>
<table class="demo-table"><tr><th>Ano</th><th>Balance</th><th>Bname</th></tr>
<tr><td>A01</td><td>5000</td><td>Rajkot</td></tr>
<tr><td>A02</td><td>5000</td><td>Surat</td></tr></table>
<p style="font-size:.72rem;color:var(--accent);font-weight:700;margin-top:.2rem;">Same &mdash; lossless!</p>
</div>
</div>

<div class="gotcha" style="margin-top:1rem;"><strong>Key Rule:</strong> Decomposition is lossless if R1 &cap; R2 &rarr; R1 or R1 &cap; R2 &rarr; R2 (the common attributes form a key of at least one sub-relation). All normalization decompositions <strong>must be lossless</strong>.</div>
</div>
</section>

<!-- ==================== NORMAL FORMS OVERVIEW ==================== -->
<section id="nf">
<div class="fi">
<div class="sec-label">The Hierarchy</div>
<h2>Normalization &amp; Normal Forms</h2>
<p style="margin-top:.6rem;"><strong style="color:var(--primary);">Normalization</strong> is the process of removing redundant data from tables to improve data integrity, scalability, and storage efficiency &mdash; by splitting tables that can be re-joined via queries.</p>

<div class="flow-box" style="margin-top:1.5rem;">
<div class="flow-step"><strong>1NF</strong><p>Atomic values only</p></div>
<div class="flow-arrow">&darr;</div>
<div class="flow-step"><strong>2NF</strong><p>No partial dependency</p></div>
<div class="flow-arrow">&darr;</div>
<div class="flow-step"><strong>3NF</strong><p>No transitive dependency</p></div>
<div class="flow-arrow">&darr;</div>
<div class="flow-step"><strong>BCNF</strong><p>Every determinant is a candidate key</p></div>
<div class="flow-arrow">&darr;</div>
<div class="flow-step"><strong>4NF</strong><p>No multivalued dependency</p></div>
<div class="flow-arrow">&darr;</div>
<div class="flow-step"><strong>5NF</strong><p>No join dependency</p></div>
</div>
<div class="note" style="margin-top:1rem;">As we move from 1NF to 5NF: <strong>number of tables increases</strong>, <strong>complexity increases</strong>, but <strong>redundancy decreases</strong>.</div>
</div>
</section>

<!-- ==================== 1NF ==================== -->
<section id="1nf">
<div class="fi">
<div class="sec-label">First Normal Form</div>
<h2>1NF &mdash; Atomic Values Only</h2>
<p style="margin-top:.6rem;">A relation is in 1NF if and only if it <strong style="color:var(--primary);">does not contain any composite or multi-valued attributes</strong>. Each cell must hold a single atomic value.</p>

<div class="a-tabs">
<button class="a-tab on" onclick="tab(this,'nf1')">Composite Attribute</button>
<button class="a-tab" onclick="tab(this,'nf1')">Multivalued Attribute</button>
</div>

<div class="a-panel on" data-g="nf1">
<h3 style="margin-top:.5rem;">Problem: Composite Attribute</h3>
<div class="tbl-wrap">
<table class="demo-table">
<tr><th>CID</th><th>Name</th><th>Address</th></tr>
<tr><td>C01</td><td>Raju</td><td style="color:var(--primary);">Jamnagar Road, Rajkot</td></tr>
<tr><td>C02</td><td>Mitesh</td><td style="color:var(--primary);">Nehru Road, Jamnagar</td></tr>
<tr><td>C03</td><td>Jay</td><td style="color:var(--primary);">C.G Road, Ahmedabad</td></tr>
</table>
</div>
<p style="font-size:.82rem;margin-top:.4rem;">Address is a composite attribute (Road + City in one cell). Difficult to query by city alone &mdash; "Jamnagar" appears in road name too!</p>
<h3 style="margin-top:.8rem;color:var(--accent);">Solution: Split into sub-attributes</h3>
<div class="tbl-wrap">
<table class="demo-table">
<tr><th>CID</th><th>Name</th><th>Road</th><th>City</th></tr>
<tr><td>C01</td><td>Raju</td><td>Jamnagar Road</td><td>Rajkot</td></tr>
<tr><td>C02</td><td>Mitesh</td><td>Nehru Road</td><td>Jamnagar</td></tr>
<tr><td>C03</td><td>Jay</td><td>C.G Road</td><td>Ahmedabad</td></tr>
</table>
</div>

<div class="pto" style="margin-top:.8rem;">
<div class="pto-badge">Exercise</div>
<div class="pto-q">Convert the below Person relation into 1NF (First Normal Form):</div>
<div class="tbl-wrap">
<table class="demo-table"><tr><th>PID</th><th>Full_Name</th><th>City</th></tr>
<tr><td>P01</td><td style="color:var(--primary);">Raju Maheshbhai Patel</td><td>Rajkot</td></tr></table>
</div>
<div class="pto-hint">Full_Name is a composite attribute (First + Middle + Last name in one cell).</div>
<button class="pto-btn" onclick="reveal(this)">Reveal Answer</button>
<div class="pto-reveal">
<p style="font-size:.82rem;color:#a9dfbf;">Split Full_Name into sub-attributes:</p>
<div class="tbl-wrap">
<table class="demo-table"><tr><th>PID</th><th>First_Name</th><th>Middle_Name</th><th>Last_Name</th><th>City</th></tr>
<tr><td>P01</td><td>Raju</td><td>Maheshbhai</td><td>Patel</td><td>Rajkot</td></tr></table>
</div>
</div>
</div>
</div>

<div class="a-panel" data-g="nf1">
<h3 style="margin-top:.5rem;">Problem: Multivalued Attribute</h3>
<div class="tbl-wrap">
<table class="demo-table">
<tr><th>Rno</th><th>Name</th><th>FailedInSubjects</th></tr>
<tr><td>101</td><td>Raju</td><td style="color:var(--primary);">DS, DBMs</td></tr>
<tr><td>102</td><td>Mitesh</td><td style="color:var(--primary);">DBMS, DS</td></tr>
<tr><td>103</td><td>Jay</td><td style="color:var(--primary);">DS, DBMS, DE</td></tr>
<tr><td>104</td><td>Jeet</td><td style="color:var(--primary);">DBMS, DE, DS</td></tr>
<tr><td>105</td><td>Harsh</td><td style="color:var(--primary);">DE, DBMS, DS</td></tr>
<tr><td>106</td><td>Neel</td><td style="color:var(--primary);">DE, DBMS</td></tr>
</table>
</div>
<p style="font-size:.82rem;margin-top:.4rem;">FailedInSubjects stores multiple values per cell &mdash; violates 1NF.</p>
<h3 style="margin-top:.8rem;color:var(--accent);">Solution: Separate table for multivalued attribute</h3>
<div class="g2">
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Student</p>
<table class="demo-table"><tr><th>Rno</th><th>Name</th></tr>
<tr><td>101</td><td>Raju</td></tr><tr><td>102</td><td>Mitesh</td></tr><tr><td>103</td><td>Jay</td></tr><tr><td>104</td><td>Jeet</td></tr><tr><td>105</td><td>Harsh</td></tr><tr><td>106</td><td>Neel</td></tr></table>
</div>
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Result (FK: Rno)</p>
<table class="demo-table"><tr><th>RID</th><th>Rno</th><th>Subject</th></tr>
<tr><td>1</td><td>101</td><td>DS</td></tr><tr><td>2</td><td>101</td><td>DBMS</td></tr><tr><td>3</td><td>102</td><td>DBMS</td></tr><tr><td>4</td><td>102</td><td>DS</td></tr><tr><td>5</td><td>103</td><td>DS</td></tr><tr><td>...</td><td>...</td><td>...</td></tr></table>
</div>
</div>
</div>
</div>
</section>

<!-- ==================== 2NF ==================== -->
<section id="2nf">
<div class="fi">
<div class="sec-label">Second Normal Form</div>
<h2>2NF &mdash; No Partial Dependency</h2>
<p style="margin-top:.6rem;">A relation is in 2NF if it is in 1NF <strong style="color:var(--primary);">and every non-primary-key attribute is fully dependent on the entire primary key</strong> (no partial dependencies).</p>

<h3 style="margin-top:1rem;">Example: Customer Table (Not in 2NF)</h3>
<div class="tbl-wrap">
<table class="demo-table">
<tr><th>CID</th><th>ANO</th><th>AccessDate</th><th>Balance</th><th>BranchName</th></tr>
<tr><td>C01</td><td>A01</td><td>01-01-2017</td><td>50000</td><td>Rajkot</td></tr>
<tr><td>C02</td><td>A01</td><td>01-03-2017</td><td>50000</td><td>Rajkot</td></tr>
<tr><td>C01</td><td>A02</td><td>01-05-2017</td><td>25000</td><td>Surat</td></tr>
<tr><td>C03</td><td>A02</td><td>01-07-2017</td><td>25000</td><td>Surat</td></tr>
</table>
</div>
<p style="font-size:.82rem;">PK = {CID, ANO}. <strong style="color:var(--primary);">FD1:</strong> {CID, ANO} &rarr; AccessDate, Balance, BranchName. <strong style="color:var(--primary);">FD2:</strong> ANO &rarr; Balance, BranchName.</p>
<div class="gotcha"><strong>Problem:</strong> Balance and BranchName depend on ANO alone (a <em>subset</em> of the PK). This is a <strong>partial dependency</strong> &mdash; violates 2NF. Joint account A01 duplicates Balance/BranchName across C01 and C02.</div>

<h3 style="margin-top:1rem;color:var(--accent);">Solution: Remove Partial Dependencies</h3>
<div class="g2">
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Account (<u>ANO</u>)</p>
<table class="demo-table"><tr><th>ANO</th><th>Balance</th><th>BranchName</th></tr>
<tr><td>A01</td><td>50000</td><td>Rajkot</td></tr><tr><td>A02</td><td>25000</td><td>Surat</td></tr></table>
</div>
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">CustomerAccess (<u>CID, ANO</u>)</p>
<table class="demo-table"><tr><th>CID</th><th>ANO</th><th>AccessDate</th></tr>
<tr><td>C01</td><td>A01</td><td>01-01-2017</td></tr><tr><td>C02</td><td>A01</td><td>01-03-2017</td></tr><tr><td>C01</td><td>A02</td><td>01-05-2017</td></tr><tr><td>C03</td><td>A02</td><td>01-07-2017</td></tr></table>
</div>
</div>
</div>
</section>

<!-- ==================== 3NF ==================== -->
<section id="3nf">
<div class="fi">
<div class="sec-label">Third Normal Form</div>
<h2>3NF &mdash; No Transitive Dependency</h2>
<p style="margin-top:.6rem;">A relation is in 3NF if it is in 2NF <strong style="color:var(--primary);">and no non-key attribute is transitively dependent on the primary key</strong>.</p>

<h3 style="margin-top:1rem;">Example: Customer Table (Not in 3NF)</h3>
<div class="tbl-wrap">
<table class="demo-table">
<tr><th>ANO</th><th>Balance</th><th>BranchName</th><th>BranchAddress</th></tr>
<tr><td>A01</td><td>50000</td><td>Rajkot</td><td>Kalawad road</td></tr>
<tr><td>A02</td><td>40000</td><td>Rajkot</td><td>Kalawad Road</td></tr>
<tr><td>A03</td><td>35000</td><td>Surat</td><td>C.G Road</td></tr>
<tr><td>A04</td><td>25000</td><td>Surat</td><td>C.G Road</td></tr>
</table>
</div>
<p style="font-size:.82rem;"><strong style="color:var(--primary);">FD1:</strong> ANO &rarr; {Balance, BranchName, BranchAddress}. <strong style="color:var(--primary);">FD2:</strong> BranchName &rarr; BranchAddress.</p>
<div class="gotcha"><strong>Transitive chain:</strong> ANO &rarr; BranchName &rarr; BranchAddress. So ANO &rarr; BranchAddress is <em>transitive</em>. BranchAddress is stored repeatedly for each account of the same branch &mdash; wastes space!</div>

<h3 style="margin-top:1rem;color:var(--accent);">Solution: Remove Transitive Dependencies</h3>
<div class="g2">
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Branch (<u>BranchName</u>)</p>
<table class="demo-table"><tr><th>BranchName</th><th>BranchAddress</th></tr>
<tr><td>Rajkot</td><td>Kalawad road</td></tr><tr><td>Surat</td><td>C.G Road</td></tr></table>
</div>
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Account (<u>ANO</u>)</p>
<table class="demo-table"><tr><th>ANO</th><th>Balance</th><th>BranchName</th></tr>
<tr><td>A01</td><td>50000</td><td>Rajkot</td></tr><tr><td>A02</td><td>40000</td><td>Rajkot</td></tr><tr><td>A03</td><td>35000</td><td>Surat</td></tr><tr><td>A04</td><td>25000</td><td>Surat</td></tr></table>
</div>
</div>
</div>
</section>

<!-- ==================== BCNF ==================== -->
<section id="bcnf">
<div class="fi">
<div class="sec-label">Boyce-Codd Normal Form</div>
<h2>BCNF &mdash; Every Determinant is a Candidate Key</h2>
<p style="margin-top:.6rem;">A relation is in BCNF if it is in 3NF <strong style="color:var(--primary);">and for every FD X &rarr; Y, X is a superkey/candidate key</strong>. BCNF addresses cases where a <em>prime attribute</em> is transitively dependent on the PK.</p>

<h3 style="margin-top:1rem;">Example: Student Table (Not in BCNF)</h3>
<div class="tbl-wrap">
<table class="demo-table">
<tr><th>RNO</th><th>Subject</th><th>Faculty</th></tr>
<tr><td>101</td><td>DS</td><td>Patel</td></tr>
<tr><td>102</td><td>DBMS</td><td>Shah</td></tr>
<tr><td>103</td><td>DS</td><td>Jadeja</td></tr>
<tr><td>104</td><td>DBMS</td><td>Dave</td></tr>
<tr><td>105</td><td>DBMS</td><td>Shah</td></tr>
</table>
</div>
<p style="font-size:.82rem;"><strong style="color:var(--primary);">FD1:</strong> {RNO, Subject} &rarr; Faculty. <strong style="color:var(--primary);">FD2:</strong> Faculty &rarr; Subject.</p>
<p style="font-size:.82rem;">One faculty teaches only one subject. A subject may be taught by multiple faculty. A student learns a subject from only one faculty.</p>
<div class="gotcha"><strong>Problem:</strong> In FD2, Faculty is the <em>determinant</em> but is <strong>not a candidate key</strong>. This violates BCNF.</div>

<h3 style="margin-top:1rem;color:var(--accent);">Solution: Decompose</h3>
<div class="g2">
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">FacultySubject (<u>Faculty</u>)</p>
<table class="demo-table"><tr><th>Faculty</th><th>Subject</th></tr>
<tr><td>Patel</td><td>DS</td></tr><tr><td>Shah</td><td>DBMS</td></tr><tr><td>Jadeja</td><td>DS</td></tr><tr><td>Dave</td><td>DBMS</td></tr></table>
</div>
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">StudentFaculty (<u>RNO, Faculty</u>)</p>
<table class="demo-table"><tr><th>RNO</th><th>Faculty</th></tr>
<tr><td>101</td><td>Patel</td></tr><tr><td>102</td><td>Shah</td></tr><tr><td>103</td><td>Jadeja</td></tr><tr><td>104</td><td>Dave</td></tr><tr><td>105</td><td>Shah</td></tr></table>
</div>
</div>

<div class="note" style="margin-top:1rem;"><strong>3NF vs BCNF:</strong> 3NF allows non-key &rarr; prime attribute FDs. BCNF does not &mdash; <em>every</em> determinant must be a superkey. BCNF is stricter. Every BCNF relation is in 3NF, but not vice versa.</div>
</div>
</section>

<!-- ==================== 4NF ==================== -->
<section id="4nf">
<div class="fi">
<div class="sec-label">Fourth Normal Form</div>
<h2>4NF &mdash; No Multivalued Dependencies</h2>
<p style="margin-top:.6rem;">A <strong style="color:var(--primary);">multivalued dependency (MVD)</strong> X &rarr;&rarr; Y exists when for a single value of X, multiple independent values of Y exist. Denoted X &rarr;&rarr; Y.</p>

<h3 style="margin-top:1rem;">MVD Example</h3>
<div class="tbl-wrap">
<table class="demo-table">
<tr><th>RNO</th><th>Subject</th><th>Faculty</th></tr>
<tr><td>101</td><td>DS</td><td>Patel</td></tr>
<tr><td>101</td><td>DBMS</td><td>Patel</td></tr>
<tr><td>101</td><td>DS</td><td>Shah</td></tr>
<tr><td>101</td><td>DBMS</td><td>Shah</td></tr>
</table>
</div>
<p style="font-size:.82rem;">RNO 101 has subjects {DS, DBMS} and faculty {Patel, Shah} &mdash; independently. All combinations must exist. This creates <strong style="color:var(--primary);">redundancy</strong> that FDs cannot capture.</p>

<div class="hbox purple" style="margin-top:1rem;">
<p><strong>4NF condition:</strong> In BCNF AND has <strong>no multivalued dependencies</strong>.</p>
<p style="font-size:.82rem;margin-top:.3rem;">For R(X,Y,Z) with X &rarr;&rarr; Y, decompose into (XY, XZ) for lossless join.</p>
</div>

<h3 style="margin-top:1rem;color:var(--accent);">Solution: Decompose</h3>
<div class="g2">
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Subject (<u>RNO, Subject</u>)</p>
<table class="demo-table"><tr><th>RNO</th><th>Subject</th></tr>
<tr><td>101</td><td>DS</td></tr><tr><td>101</td><td>DBMS</td></tr></table>
</div>
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Faculty (<u>RNO, Faculty</u>)</p>
<table class="demo-table"><tr><th>RNO</th><th>Faculty</th></tr>
<tr><td>101</td><td>Patel</td></tr><tr><td>101</td><td>Shah</td></tr></table>
</div>
</div>

<h3 style="margin-top:1.5rem;">Formal Conditions for MVD</h3>
<div class="hbox blue">
<p style="font-size:.82rem;">Attribute <strong>a</strong> multivalued-determines <strong>b</strong> if, for any legal relation r(R), for all pairs of tuples t1 and t2 in r such that <strong>t1[a] = t2[a]</strong>, there exist t3 and t4 in r such that:</p>
<div class="code-block" style="margin-top:.4rem;">t1[a] = t2[a] = t3[a] = t4[a]
t1[b] = t3[b];    t2[b] = t4[b];
t1 = t4;           t2 = t3
<span class="cm">Then multivalued (MVD) dependency exists.</span></div>
</div>

<h3 style="margin-top:1.5rem;">CTB Example (Classic MVD)</h3>
<p style="font-size:.82rem;">CTB(course, teacher, book) &mdash; teacher T can teach course C, book B is a recommended text. No FDs exist; key is CTB. But course &rarr;&rarr; teacher and course &rarr;&rarr; book.</p>
<div class="tbl-wrap" style="margin-top:.4rem;">
<table class="demo-table"><tr><th>course</th><th>teacher</th><th>book</th></tr>
<tr><td>Physics101</td><td>Green</td><td>Mechanics</td></tr>
<tr><td>Physics101</td><td>Green</td><td>Optics</td></tr>
<tr><td>Physics101</td><td>Brown</td><td>Mechanics</td></tr>
<tr><td>Physics101</td><td>Brown</td><td>Optics</td></tr>
<tr><td>Math301</td><td>Green</td><td>Mechanics</td></tr>
<tr><td>Math301</td><td>Green</td><td>Vectors</td></tr>
<tr><td>Math301</td><td>Green</td><td>Geometry</td></tr></table>
</div>
<p style="font-size:.78rem;margin-top:.3rem;">CTB is in BCNF (no FDs, key = CTB) but <strong style="color:var(--primary);">not in 4NF</strong> due to MVDs. The fact that Green teaches Physics101 is recorded once per book &mdash; redundancy! <strong style="color:var(--accent);">Decompose into CT and CB.</strong></p>

<h3 style="margin-top:1.5rem;">Persons Example (MVD Cross-Product)</h3>
<div class="hbox purple">
<p><strong>Persons(Man, Phones, Dog_Like)</strong> &mdash; Key: MPD. Man &rarr;&rarr; Phones, Man &rarr;&rarr; Dog_Like.</p>
</div>
<div class="g2" style="margin-top:.4rem;">
<div>
<p style="font-size:.7rem;font-weight:700;color:var(--muted);">Original (UNF)</p>
<table class="demo-table"><tr><th>Man</th><th>Phones</th><th>Dog_Like</th></tr>
<tr><td>M1</td><td>P1/P2</td><td>D1/D2</td></tr>
<tr><td>M2</td><td>P3</td><td>D2</td></tr></table>
</div>
<div>
<p style="font-size:.7rem;font-weight:700;color:var(--muted);">Post 1NF (all combinations)</p>
<table class="demo-table"><tr><th>Man</th><th>Phones</th><th>Dog_Like</th></tr>
<tr><td>M1</td><td>P1</td><td>D1</td></tr>
<tr><td>M1</td><td>P2</td><td>D2</td></tr>
<tr><td>M2</td><td>P3</td><td>D2</td></tr>
<tr class="hl-row"><td>M1</td><td>P1</td><td>D2</td></tr>
<tr class="hl-row"><td>M1</td><td>P2</td><td>D1</td></tr></table>
</div>
</div>
<p style="font-size:.78rem;margin-top:.3rem;">A man's phones are independent of the dogs they like &mdash; after 1NF normalization, each phone appears with each dog in all combinations. This redundancy is due to MVD.</p>

<h3 style="margin-top:1.5rem;">Formal MVD Definition + University Courses Example</h3>
<div class="hbox teal">
<p style="font-size:.82rem;">Let R be a relation schema, &alpha; &sube; R and &beta; &sube; R. The MVD <strong>&alpha; &rarr;&rarr; &beta;</strong> holds on R if in any legal relation r(R), for all pairs of tuples t<sub>1</sub> and t<sub>2</sub> such that t<sub>1</sub>[&alpha;] = t<sub>2</sub>[&alpha;], there exist t<sub>3</sub> and t<sub>4</sub> such that:</p>
<div class="code-block" style="margin-top:.3rem;">t<sub>1</sub>[&alpha;] = t<sub>2</sub>[&alpha;] = t<sub>3</sub>[&alpha;] = t<sub>4</sub>[&alpha;]
t<sub>3</sub>[&beta;]   = t<sub>1</sub>[&beta;]     t<sub>3</sub>[R&minus;&beta;] = t<sub>2</sub>[R&minus;&beta;]
t<sub>4</sub>[&beta;]   = t<sub>2</sub>[&beta;]     t<sub>4</sub>[R&minus;&beta;] = t<sub>1</sub>[R&minus;&beta;]</div>
</div>
<p style="font-size:.82rem;margin-top:.5rem;">Test: <strong>course &rarr;&rarr; book</strong> in university data:</p>
<div class="tbl-wrap">
<table class="demo-table"><tr><th>Course</th><th>Book</th><th>Lecturer</th><th>Tuples</th></tr>
<tr><td>AHA</td><td>Silberschatz</td><td>John D</td><td style="color:var(--accent);font-weight:700;">t1</td></tr>
<tr><td>AHA</td><td>Nederpelt</td><td>William M</td><td style="color:var(--accent);font-weight:700;">t2</td></tr>
<tr class="hl-row"><td>AHA</td><td>Silberschatz</td><td>William M</td><td style="color:var(--primary);font-weight:700;">t3</td></tr>
<tr class="hl-row"><td>AHA</td><td>Nederpelt</td><td>John D</td><td style="color:var(--primary);font-weight:700;">t4</td></tr>
<tr><td>AHA</td><td>Silberschatz</td><td>Christian G</td><td></td></tr>
<tr><td>AHA</td><td>Nederpelt</td><td>Christian G</td><td></td></tr>
<tr><td>OSO</td><td>Silberschatz</td><td>John D</td><td></td></tr>
<tr><td>OSO</td><td>Silberschatz</td><td>William M</td><td></td></tr></table>
</div>
<p style="font-size:.78rem;margin-top:.3rem;">t1 &amp; t2 agree on course (AHA). t3 swaps: gets t1's book + t2's lecturer. t4 swaps: gets t2's book + t1's lecturer. Both t3 and t4 exist &rarr; MVD confirmed!</p>

<h3 style="margin-top:1.5rem;">FD &amp; MVD Together</h3>
<p style="font-size:.82rem;">A table can have both FDs and MVDs: <strong>RNO &rarr; Address</strong> (FD) + <strong>RNO &rarr;&rarr; Subject</strong> + <strong>RNO &rarr;&rarr; Faculty</strong> (MVDs).</p>
<div class="g2" style="margin-top:.5rem;">
<div>
<p style="font-size:.7rem;font-weight:700;color:var(--muted);">Student (before)</p>
<table class="demo-table"><tr><th>RNO</th><th>Address</th><th>Subject</th><th>Faculty</th></tr>
<tr><td>101</td><td>C.G. Road, Rajkot</td><td>DS</td><td>Patel</td></tr>
<tr><td>101</td><td>C.G. Road, Rajkot</td><td>DBMS</td><td>Patel</td></tr>
<tr><td>101</td><td>C.G. Road, Rajkot</td><td>DS</td><td>Shah</td></tr>
<tr><td>101</td><td>C.G. Road, Rajkot</td><td>DBMS</td><td>Shah</td></tr></table>
</div>
<div>
<p style="font-size:.7rem;font-weight:700;color:var(--muted);">Decompose into 3 tables:</p>
<table class="demo-table"><tr><th>RNO</th><th>Subject</th></tr>
<tr><td>101</td><td>DS</td></tr><tr><td>101</td><td>DBMS</td></tr></table>
<table class="demo-table" style="margin-top:.3rem;"><tr><th>RNO</th><th>Faculty</th></tr>
<tr><td>101</td><td>Patel</td></tr><tr><td>101</td><td>Shah</td></tr></table>
<table class="demo-table" style="margin-top:.3rem;"><tr><th>RNO</th><th>Address</th></tr>
<tr><td>101</td><td>C.G. Road, Rajkot</td></tr></table>
</div>
</div>

<div class="note" style="margin-top:.8rem;"><strong>MVD notes:</strong> Total attributes must be &gt; 2. If 3 attributes, 2 must be independent of each other. A table can have both FDs and MVDs together.</div>
</div>
</section>

<!-- ==================== 5NF ==================== -->
<section id="5nf">
<div class="fi">
<div class="sec-label">Fifth Normal Form</div>
<h2>5NF &mdash; No Join Dependencies</h2>
<p style="margin-top:.6rem;">A <strong style="color:var(--primary);">join dependency (JD)</strong> is a generalization of MVDs. JD &bowtie; {R1, ..., Rn} holds if R1, ..., Rn is a lossless-join decomposition of R.</p>

<div class="hbox teal" style="margin-top:1rem;">
<p><strong>5NF condition:</strong> In 4NF AND <strong>cannot be further losslessly decomposed</strong> into smaller tables.</p>
<p style="font-size:.82rem;margin-top:.3rem;">An MVD X &rarr;&rarr; Y over R can be expressed as the join dependency &bowtie; {XY, X(R&minus;Y)}. E.g., in CTB, C &rarr;&rarr; T = &bowtie; {CT, CB}.</p>
</div>

<div class="gotcha" style="margin-top:.8rem;"><strong>Important:</strong> Unlike FDs and MVDs, there is <strong>no set of sound and complete inference rules</strong> for JDs.</div>

<h3 style="margin-top:1rem;">Example: Student_Result (Not in 5NF)</h3>
<div class="tbl-wrap">
<table class="demo-table"><tr><th>RID</th><th>RNO</th><th>Name</th><th>Subject</th><th>Result</th></tr>
<tr><td>1</td><td>101</td><td>Raj</td><td>DBMS</td><td>Pass</td></tr>
<tr><td>2</td><td>101</td><td>Raj</td><td>DS</td><td>Pass</td></tr>
<tr><td>3</td><td>101</td><td>Raj</td><td>DF</td><td>Pass</td></tr>
<tr><td>4</td><td>102</td><td>Meet</td><td>DBMS</td><td>Pass</td></tr>
<tr><td>5</td><td>102</td><td>Meet</td><td>DS</td><td>Fail</td></tr>
<tr><td>6</td><td>102</td><td>Meet</td><td>DF</td><td>Pass</td></tr>
<tr><td>7</td><td>103</td><td>Suresh</td><td>DBMS</td><td>Fail</td></tr>
<tr><td>8</td><td>103</td><td>Suresh</td><td>DS</td><td>Pass</td></tr></table>
</div>
<p style="font-size:.82rem;margin-top:.3rem;">This relation can be <strong style="color:var(--primary);">further decomposed</strong> into sub-relations &rarr; not in 5NF.</p>

<h3 style="margin-top:1rem;color:var(--accent);">Solution: Decompose into 3 tables (5NF)</h3>
<div class="g3">
<div>
<p style="font-size:.7rem;font-weight:700;color:var(--muted);">Student (<u>RNO</u>)</p>
<table class="demo-table"><tr><th>RNO</th><th>Name</th></tr>
<tr><td>101</td><td>Raj</td></tr><tr><td>102</td><td>Meet</td></tr><tr><td>103</td><td>Suresh</td></tr></table>
</div>
<div>
<p style="font-size:.7rem;font-weight:700;color:var(--muted);">Subject (<u>SID</u>)</p>
<table class="demo-table"><tr><th>SID</th><th>Name</th></tr>
<tr><td>1</td><td>DBMS</td></tr><tr><td>2</td><td>DS</td></tr><tr><td>3</td><td>DF</td></tr></table>
</div>
<div>
<p style="font-size:.7rem;font-weight:700;color:var(--muted);">Result (<u>RID</u>)</p>
<table class="demo-table"><tr><th>RID</th><th>RNO</th><th>SID</th><th>Result</th></tr>
<tr><td>1</td><td>101</td><td>1</td><td>Pass</td></tr><tr><td>2</td><td>101</td><td>2</td><td>Pass</td></tr><tr><td>3</td><td>101</td><td>3</td><td>Pass</td></tr>
<tr><td>4</td><td>102</td><td>1</td><td>Pass</td></tr><tr><td>5</td><td>102</td><td>2</td><td>Fail</td></tr><tr><td>6</td><td>102</td><td>3</td><td>Pass</td></tr>
<tr><td>7</td><td>103</td><td>1</td><td>Fail</td></tr><tr><td>8</td><td>103</td><td>2</td><td>Pass</td></tr></table>
</div>
</div>
<p style="font-size:.82rem;margin-top:.5rem;">None of these three tables can be further decomposed losslessly &rarr; <strong style="color:var(--accent);">database is now in 5NF.</strong></p>
</div>
</section>

<!-- ==================== WORKED EXAMPLE ==================== -->
<section id="worked">
<div class="fi">
<div class="sec-label">Step-by-Step</div>
<h2>Worked Example: UNF &rarr; 3NF</h2>
<p style="margin-top:.6rem;">A software firm tracks: Employee Number, Employee Name, Date of Birth, Department Code, Department Name, Project Code, Project Description, Project Supervisor.</p>

<div class="hbox yellow" style="margin-top:1rem;">
<p><strong>Given:</strong> Each employee number is unique. Each department has a single code. Each project has a single code and supervisor. An employee may work on multiple projects. Project fields are repeating groups.</p>
</div>

<div class="a-tabs">
<button class="a-tab on" onclick="tab(this,'wk')">UNF</button>
<button class="a-tab" onclick="tab(this,'wk')">1NF</button>
<button class="a-tab" onclick="tab(this,'wk')">2NF</button>
<button class="a-tab" onclick="tab(this,'wk')">3NF</button>
</div>

<div class="a-panel on" data-g="wk">
<h3>UNF (Unnormalized)</h3>
<div class="tbl-wrap">
<table class="demo-table">
<tr><th>EmpNo</th><th>EmpName</th><th>DOB</th><th>DeptCode</th><th>DeptName</th><th>ProjCode</th><th>ProjDesc</th><th>ProjSupervisor</th></tr>
<tr><td>1</td><td>Raj</td><td>1-1-85</td><td>1</td><td>CE</td><td>1</td><td>IOT</td><td>Patel</td></tr>
<tr><td>2</td><td>Meet</td><td>4-4-86</td><td>2</td><td>EC</td><td>2</td><td>PHP</td><td>Shah</td></tr>
<tr><td>3</td><td>Suresh</td><td>2-2-85</td><td>1</td><td>CE</td><td>1</td><td>IOT</td><td>Patel</td></tr>
<tr><td>1</td><td>Raj</td><td>1-1-85</td><td>1</td><td>CE</td><td>2</td><td>PHP</td><td>Shah</td></tr>
</table>
</div>
<p style="font-size:.82rem;color:var(--primary);margin-top:.4rem;">Problem: Repeating groups (Project fields) &mdash; employee 1 appears twice for 2 projects.</p>
</div>

<div class="a-panel" data-g="wk">
<h3>1NF &mdash; Remove Repeating Groups</h3>
<p style="font-size:.82rem;margin-bottom:.5rem;">Split into two tables: one for employee details, one for employee-project assignments.</p>
<div class="g2">
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Employee (<u>EmpNo</u>)</p>
<table class="demo-table"><tr><th>EmpNo</th><th>EmpName</th><th>DOB</th><th>DeptCode</th><th>DeptName</th></tr>
<tr><td>1</td><td>Raj</td><td>1-1-85</td><td>1</td><td>CE</td></tr>
<tr><td>2</td><td>Meet</td><td>4-4-86</td><td>2</td><td>EC</td></tr>
<tr><td>3</td><td>Suresh</td><td>2-2-85</td><td>1</td><td>CE</td></tr></table>
</div>
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">EmpProject (<u>EmpNo, ProjCode</u>)</p>
<table class="demo-table"><tr><th>EmpNo</th><th>ProjCode</th><th>ProjDesc</th><th>ProjSupervisor</th></tr>
<tr><td>1</td><td>1</td><td>IOT</td><td>Patel</td></tr>
<tr><td>2</td><td>2</td><td>PHP</td><td>Shah</td></tr>
<tr><td>3</td><td>1</td><td>IOT</td><td>Patel</td></tr>
<tr><td>1</td><td>2</td><td>PHP</td><td>Shah</td></tr></table>
</div>
</div>
</div>

<div class="a-panel" data-g="wk">
<h3>2NF &mdash; Remove Partial Dependencies</h3>
<p style="font-size:.82rem;margin-bottom:.5rem;">In EmpProject, ProjDesc and ProjSupervisor depend on ProjCode alone (partial dep on {EmpNo, ProjCode}).</p>
<div class="g3">
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Employee (<u>EmpNo</u>)</p>
<table class="demo-table"><tr><th>EmpNo</th><th>Name</th><th>DOB</th><th>DeptCode</th><th>DeptName</th></tr>
<tr><td>1</td><td>Raj</td><td>1-1-85</td><td>1</td><td>CE</td></tr>
<tr><td>2</td><td>Meet</td><td>4-4-86</td><td>2</td><td>EC</td></tr>
<tr><td>3</td><td>Suresh</td><td>2-2-85</td><td>1</td><td>CE</td></tr></table>
</div>
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Project (<u>ProjCode</u>)</p>
<table class="demo-table"><tr><th>ProjCode</th><th>ProjDesc</th><th>ProjSupervisor</th></tr>
<tr><td>1</td><td>IOT</td><td>Patel</td></tr><tr><td>2</td><td>PHP</td><td>Shah</td></tr></table>
</div>
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">EmpProject (<u>EmpNo, ProjCode</u>)</p>
<table class="demo-table"><tr><th>EmpNo</th><th>ProjCode</th></tr>
<tr><td>1</td><td>1</td></tr><tr><td>2</td><td>2</td></tr><tr><td>3</td><td>1</td></tr><tr><td>1</td><td>2</td></tr></table>
</div>
</div>
</div>

<div class="a-panel" data-g="wk">
<h3>3NF &mdash; Remove Transitive Dependencies</h3>
<p style="font-size:.82rem;margin-bottom:.5rem;">In Employee, EmpNo &rarr; DeptCode &rarr; DeptName is transitive. Extract Department.</p>
<div class="g2">
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Employee (<u>EmpNo</u>)</p>
<table class="demo-table"><tr><th>EmpNo</th><th>Name</th><th>DOB</th><th>DeptCode</th></tr>
<tr><td>1</td><td>Raj</td><td>1-1-85</td><td>1</td></tr>
<tr><td>2</td><td>Meet</td><td>4-4-86</td><td>2</td></tr>
<tr><td>3</td><td>Suresh</td><td>2-2-85</td><td>1</td></tr></table>
</div>
<div>
<p style="font-size:.75rem;font-weight:700;color:var(--muted);">Department (<u>DeptCode</u>)</p>
<table class="demo-table"><tr><th>DeptCode</th><th>DeptName</th></tr>
<tr><td>1</td><td>CE</td></tr><tr><td>2</td><td>EC</td></tr></table>
</div>
</div>
<p style="font-size:.82rem;margin-top:.5rem;">Final 3NF schema: <strong style="color:var(--accent);">Employee + Department + Project + EmpProject</strong> (4 tables).</p>
</div>
</div>
</section>

<!-- ==================== COMPARISON TABLE ==================== -->
<section id="cmp">
<div class="fi">
<div class="sec-label">Quick Reference</div>
<h2>Normal Forms Comparison</h2>
<div class="tbl-wrap" style="margin-top:1rem;">
<table class="diff-table">
<tr><th>NF</th><th>Requirement</th><th>Dependency Eliminated</th></tr>
<tr><td style="color:var(--primary);font-weight:700;">1NF</td><td>All attributes are atomic (single-valued)</td><td>Composite / Multi-valued attributes</td></tr>
<tr><td style="color:var(--primary);font-weight:700;">2NF</td><td>1NF + no partial dependency</td><td>Partial FD (non-key depends on subset of PK)</td></tr>
<tr><td style="color:var(--primary);font-weight:700;">3NF</td><td>2NF + no transitive dependency</td><td>Transitive FD (non-key &rarr; non-key)</td></tr>
<tr><td style="color:var(--primary);font-weight:700;">BCNF</td><td>3NF + every determinant is a candidate key</td><td>Non-key &rarr; prime attribute FDs</td></tr>
<tr><td style="color:var(--primary);font-weight:700;">4NF</td><td>BCNF + no multivalued dependency</td><td>MVDs (independent multi-valued facts)</td></tr>
<tr><td style="color:var(--primary);font-weight:700;">5NF</td><td>4NF + no join dependency</td><td>Join dependencies (lossless decomposition)</td></tr>
</table>
</div>

<div class="hbox orange" style="margin-top:1rem;">
<p><strong>Denormalization:</strong> Normalization can slow performance due to frequent joins. A normalized DB requires more CPU/Memory/IO. <strong>Denormalization</strong> intentionally adds redundancy back to reduce joins for time-critical operations.</p>
</div>
</div>
</section>

<!-- ==================== FLASHCARDS ==================== -->
<section id="flash">
<div class="fi">
<div class="sec-label">Active Recall</div>
<h2>Flashcards <span style="font-size:.7rem;color:var(--muted);">(click to flip)</span></h2>
<div class="fc-grid">

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">FD</div><div class="fc-q">What is a functional dependency X &rarr; Y?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">If two tuples agree on X, they must agree on Y. X uniquely determines Y.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Full FD</div><div class="fc-q">When is B fully functionally dependent on A?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">B depends on A but NOT on any proper subset of A. Removing any attribute from A breaks the dependency.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Partial FD</div><div class="fc-q">What is a partial functional dependency?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">B depends on A AND on a proper subset of A. Some attribute in A is unnecessary.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Transitive FD</div><div class="fc-q">Define transitive functional dependency.</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">If A &rarr; B and B &rarr; C, then A &rarr; C is transitive. C depends on A through B.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Trivial FD</div><div class="fc-q">When is X &rarr; Y trivial?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">When Y &sube; X. Example: AB &rarr; A is trivial because A is already part of AB.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Armstrong</div><div class="fc-q">Name the 3 primary Armstrong's Axioms.</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">Reflexivity (Y&sube;X &rArr; X&rarr;Y), Augmentation (X&rarr;Y &rArr; XZ&rarr;YZ), Transitivity (X&rarr;Y, Y&rarr;Z &rArr; X&rarr;Z).</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Union Rule</div><div class="fc-q">State the Union axiom.</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">If X &rarr; Y and X &rarr; Z, then X &rarr; YZ. Combine RHS when LHS is the same.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">F+</div><div class="fc-q">What is the closure of a set of FDs (F&plus;)?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">The set of ALL functional dependencies logically implied by F, derived using Armstrong's Axioms.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">&alpha;+</div><div class="fc-q">What is attribute closure &alpha;&plus;?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">The set of all attributes functionally determined by &alpha; under F. If &alpha;&plus; = all attributes, &alpha; is a superkey.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Candidate Key</div><div class="fc-q">How to find candidate keys using closure?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">Compute &alpha;&plus; for attribute subsets. If &alpha;&plus; = all attrs, &alpha; is a superkey. If no proper subset of &alpha; is also a superkey, &alpha; is a candidate key.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Extraneous</div><div class="fc-q">What is an extraneous attribute?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">An attribute in an FD that can be removed without changing F&plus;. E.g., B in AB&rarr;C when A&rarr;C already holds.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Fc</div><div class="fc-q">What is a canonical cover?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">Minimal set of FDs equivalent to F: no extraneous attributes, each LHS is unique, F &hArr; Fc.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Anomaly</div><div class="fc-q">Name the 3 types of database anomalies.</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">Insert anomaly (can't add data without unrelated data), Delete anomaly (losing unrelated data), Update anomaly (inconsistency from partial updates).</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Decomposition</div><div class="fc-q">Lossy vs Lossless decomposition?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">Lossless: join of sub-relations = original. Lossy: join creates spurious tuples. Rule: R1&cap;R2 must be a key of R1 or R2.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">1NF</div><div class="fc-q">What is the condition for 1NF?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">All attributes must be atomic &mdash; no composite or multi-valued attributes. Each cell contains a single value.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">2NF</div><div class="fc-q">What is the condition for 2NF?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">1NF + no partial dependency. Every non-key attribute must be fully dependent on the entire primary key.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">3NF</div><div class="fc-q">What is the condition for 3NF?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">2NF + no transitive dependency. No non-key attribute should transitively depend on the primary key.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">BCNF</div><div class="fc-q">What is the condition for BCNF?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">3NF + every determinant must be a candidate key. For every X&rarr;Y, X is a superkey.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">4NF</div><div class="fc-q">What is the condition for 4NF?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">BCNF + no multivalued dependencies. If X&rarr;&rarr;Y, then X must be a superkey.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">MVD</div><div class="fc-q">What is a multivalued dependency?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">X&rarr;&rarr;Y: for a single X value, multiple Y values exist independently of other attributes. Denoted by double arrow.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">5NF</div><div class="fc-q">What is the condition for 5NF?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">4NF + no join dependencies. Cannot be further losslessly decomposed into smaller tables.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Denorm</div><div class="fc-q">What is denormalization and why use it?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">Intentionally adding redundancy back to reduce joins. Used to tune performance for time-critical read-heavy operations.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Pseudo-Trans</div><div class="fc-q">State the Pseudo-Transitivity axiom.</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">If X&rarr;Y and WY&rarr;Z, then WX&rarr;Z. Combine determinants when Y bridges the dependency.</div></div>
</div></div>

<div class="fc" onclick="this.classList.toggle('flipped')"><div class="fc-in">
<div class="fc-fr"><div class="fc-tag">Key Insight</div><div class="fc-q">As we move from 1NF to 5NF, what changes?</div><div class="fc-hint">click to flip</div></div>
<div class="fc-bk"><div class="fc-a">Number of tables increases, complexity increases, but redundancy decreases.</div></div>
</div></div>

</div>
</div>
</section>

<!-- ==================== QUIZ ==================== -->
<section id="quiz">
<div class="fi">
<div class="sec-label">Test Yourself</div>
<h2>Quiz &mdash; 15 MCQs</h2>
<div class="quiz-wrap" style="margin-top:1.5rem;">
<div id="q-prog"></div>
<div id="q-card" class="q-card">
<div id="q-num" class="q-num"></div>
<div id="q-text" class="q-text"></div>
<div id="q-opts" class="q-opts"></div>
<div id="q-exp" class="q-exp"></div>
<div class="q-nav"><button id="q-next" class="btn" style="display:none;">Next &rarr;</button></div>
</div>
<div id="q-score">
<div class="sc-l">Your Score</div>
<div class="sc-n"><span id="sc-val"></span>/15</div>
<div id="sc-msg" style="margin-top:.5rem;color:var(--muted);"></div>
<button class="btn" style="margin-top:1rem;" onclick="initQ()">Retry Quiz</button>
</div>
</div>
</div>
</section>

<script>
// PROGRESS BAR
window.addEventListener('scroll',()=>{
  const h=document.documentElement;
  document.getElementById('pb').style.width=(h.scrollTop/(h.scrollHeight-h.clientHeight)*100)+'%';
});

// FADE IN
const obs=new IntersectionObserver(es=>es.forEach(e=>{if(e.isIntersecting)e.target.classList.add('v')}),{threshold:.12});
document.querySelectorAll('.fi').forEach(el=>obs.observe(el));

// TABS
function tab(btn,g){
  btn.parentElement.querySelectorAll('.a-tab').forEach(t=>t.classList.remove('on'));
  btn.classList.add('on');
  const panels=document.querySelectorAll('.a-panel[data-g="'+g+'"]');
  const idx=[...btn.parentElement.children].indexOf(btn);
  panels.forEach((p,i)=>{p.classList.toggle('on',i===idx);});
}

// REVEAL
function reveal(btn){
  if(btn.classList.contains('revealed'))return;
  const box=btn.nextElementSibling;
  box.classList.add('show');
  btn.textContent='Answer Revealed';
  btn.classList.add('revealed');
}

// QUIZ
const QS=[
  {q:"What does X â†’ Y mean in functional dependency?",o:["X is a subset of Y","Y uniquely determines X","X uniquely determines Y","X and Y are independent"],a:2,e:"X â†’ Y means: if two tuples have the same X value, they must have the same Y value. X uniquely determines Y."},
  {q:"Which type of FD violates 2NF?",o:["Transitive FD","Full FD","Partial FD","Trivial FD"],a:2,e:"Partial FD means a non-key attribute depends on a proper subset of the primary key. This violates 2NF, which requires full dependency on the entire PK."},
  {q:"Which type of FD violates 3NF?",o:["Partial FD","Multivalued dependency","Full FD","Transitive FD"],a:3,e:"Transitive FD (Aâ†’Bâ†’C, so Aâ†’C) means a non-key attribute depends on another non-key attribute. This violates 3NF."},
  {q:"Armstrong's Augmentation axiom states:",o:["If Xâ†’Y then XZâ†’YZ","If Xâ†’Y and Yâ†’Z then Xâ†’Z","If YâŠ†X then Xâ†’Y","If Xâ†’Y and Xâ†’Z then Xâ†’YZ"],a:0,e:"Augmentation: if Xâ†’Y holds, then adding the same attributes Z to both sides preserves the dependency: XZâ†’YZ."},
  {q:"Given R(A,B,C,G,H,I), F={Aâ†’B, Aâ†’C, CGâ†’H, CGâ†’I, Bâ†’H}. What is (AG)+?",o:["ABCG","ABCGH","ABCGHI","ABG"],a:2,e:"AGâ†’Aâ†’B(ABG)â†’Aâ†’C(ABCG)â†’CGâ†’H(ABCGH)â†’CGâ†’I(ABCGHI). AG+ = all attributes = ABCGHI."},
  {q:"What is a canonical cover (Fc)?",o:["The largest set of FDs","A minimal equivalent set of FDs with no extraneous attributes and unique LHS","Any subset of F","The set of all trivial FDs"],a:1,e:"Fc is the minimal set of FDs equivalent to F: no redundant FDs, no extraneous attributes, each left side appears exactly once."},
  {q:"An insert anomaly occurs when:",o:["Data cannot be deleted","Data becomes inconsistent after update","Certain data cannot be inserted without other unrelated data","Tables cannot be joined"],a:2,e:"Insert anomaly: can't add new data (e.g., a new department) without also adding unrelated data (e.g., an employee), because the PK would be NULL."},
  {q:"A decomposition is lossless if:",o:["R1 âˆª R2 = R","R1 âˆ© R2 = âˆ…","R1 âˆ© R2 is a superkey of R1 or R2","The decomposition creates fewer tables"],a:2,e:"Lossless join condition: the common attributes (R1âˆ©R2) must be a superkey of at least one of the sub-relations. This ensures no spurious tuples on natural join."},
  {q:"A relation is in 1NF if:",o:["It has no partial dependencies","All attributes contain atomic values only","Every determinant is a candidate key","It has no transitive dependencies"],a:1,e:"1NF requires that every attribute contains only atomic (single, indivisible) values â€” no composite or multi-valued attributes."},
  {q:"In BCNF, for every FD Xâ†’Y:",o:["Y must be a prime attribute","X must be a non-key attribute","X must be a superkey/candidate key","Y must be a superkey"],a:2,e:"BCNF requires that for every non-trivial FD Xâ†’Y, X must be a superkey. This is stricter than 3NF which allows exceptions for prime attributes."},
  {q:"What is a multivalued dependency (MVD)?",o:["Xâ†’Y where Y is a single value","Xâ†’â†’Y where for each X, multiple independent Y values exist","A dependency between two keys","A transitive chain of FDs"],a:1,e:"MVD Xâ†’â†’Y means: for a given X value, the set of Y values is independent of the set of (Râˆ’Xâˆ’Y) values. Creates redundancy that FDs can't capture."},
  {q:"4NF requires:",o:["No partial dependencies","No transitive dependencies","BCNF + no multivalued dependencies","1NF + no MVDs"],a:2,e:"4NF = BCNF + no non-trivial multivalued dependencies. A relation can be in BCNF but not 4NF if MVDs exist."},
  {q:"Given F={Aâ†’BC, Bâ†’C, Aâ†’B, ABâ†’C}, the canonical cover is:",o:["{Aâ†’BC, Bâ†’C, ABâ†’C}","{Aâ†’B, Bâ†’C}","{Aâ†’BC, Bâ†’C}","{ABâ†’C, Bâ†’C}"],a:1,e:"Union: Aâ†’BC absorbs Aâ†’B. ABâ†’C removed (Bâ†’C exists). C extraneous in Aâ†’BC (Aâ†’B, Bâ†’C gives Aâ†’C). Fc = {Aâ†’B, Bâ†’C}."},
  {q:"Denormalization is used to:",o:["Increase redundancy to improve query performance","Remove all anomalies","Convert to 5NF","Eliminate all FDs"],a:0,e:"Denormalization intentionally reintroduces redundancy to reduce the number of joins needed at query time, improving performance for read-heavy workloads."},
  {q:"R(A,B,C,D,E), F={ABâ†’C, ACâ†’B, BCâ†’A, Dâ†’E}. Which is a candidate key?",o:["A","AB","ABD","D"],a:2,e:"(ABD)+: ABâ†’C(ABCD), Dâ†’E(ABCDE) = all attributes. Check subsets: (AB)+=ABC (missing D,E). (AD)+ and (BD)+ don't give all. So ABD is a candidate key. Similarly ACD, BCD work too."}
];

let cur=0,score=0,answered=false;

function initQ(){
  cur=0;score=0;answered=false;
  document.getElementById('q-score').style.display='none';
  document.getElementById('q-card').style.display='block';
  renderQ();
}

function renderQ(){
  const q=QS[cur];
  document.getElementById('q-num').textContent='Question '+(cur+1)+' of '+QS.length;
  document.getElementById('q-text').textContent=q.q;
  const opts=document.getElementById('q-opts');
  opts.innerHTML='';
  q.o.forEach((o,i)=>{
    const b=document.createElement('button');
    b.className='q-opt';b.textContent=o;
    b.onclick=()=>answer(i);
    opts.appendChild(b);
  });
  document.getElementById('q-exp').className='q-exp';
  document.getElementById('q-exp').textContent='';
  document.getElementById('q-next').style.display='none';
  answered=false;
  const prog=document.getElementById('q-prog');
  prog.innerHTML='';
  QS.forEach((_,i)=>{
    const d=document.createElement('div');
    d.className='q-dot'+(i===cur?' cur':'');
    prog.appendChild(d);
  });
}

function answer(i){
  if(answered)return;
  answered=true;
  const q=QS[cur];
  const btns=document.querySelectorAll('.q-opt');
  btns.forEach(b=>b.disabled=true);
  if(i===q.a){score++;btns[i].classList.add('ok');}
  else{btns[i].classList.add('no');btns[q.a].classList.add('ok');}
  const exp=document.getElementById('q-exp');
  exp.textContent=q.e;
  exp.className='q-exp show '+(i===q.a?'ok':'no');
  document.getElementById('q-next').style.display='block';
  const dots=document.querySelectorAll('.q-dot');
  dots[cur].classList.add(i===q.a?'done':'bad');
}

document.getElementById('q-next').onclick=()=>{
  cur++;
  if(cur>=QS.length){
    document.getElementById('q-card').style.display='none';
    const sc=document.getElementById('q-score');
    sc.style.display='block';
    document.getElementById('sc-val').textContent=score;
    const p=score/QS.length;
    const msgs=['Keep studying â€” review all normal forms!','Getting there â€” focus on FD types and closures.','Decent! Revisit BCNF vs 3NF.','Good work! Almost there.','Great job! Solid understanding.','Excellent! Nearly perfect.','Perfect score! Normalization master!'];
    document.getElementById('sc-msg').textContent=msgs[Math.min(Math.floor(p*6),6)];
  } else {renderQ();}
};

initQ();
</script>
</body>
</html>
